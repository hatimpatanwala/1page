var app=angular.module("app",["LocalStorageModule","toastr","ngRoute","ui.router"]);function moveToProductRequirement(t){t?setTimeout(function(){$("html, body").animate({scrollTop:$(".bookpost_div").offset().top-144},500)},350):$("html, body").animate({scrollTop:$(".bookpost_div").offset().top-144},500)}function timeAgo(t){var e=new Date(t),a=new Date,o=(a-e)/36e5,r=(a-e)/6e4,i=(a-e)/1e3;if(i<60)return i.toFixed(0)+" secs ago";if(r<60)return r.toFixed(0)+" mins ago";if(o<24)return o.toFixed(0)+" hour ago";if(24<o&&o<168){var n=(o/24).toFixed(0);return n+(1==n?" day ago":" days ago")}return 168<o&&o<672?((o+168)/24/7).toFixed(0)+" weeks ago":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]+" ï¿½"+e.getFullYear().toString().substr(2,2)+"."}function setUpLink(){mobileApp||($("#main-header-logo").attr("href","/"),$("#main-header-transport").attr("href","/transport"),$("#main-header-buyer").attr("href","/buyer"),$("#mobile-header-logo").attr("href","/"),$("#mobile-header-transport").attr("href","/transport"),$("#sidebar-transport").attr("href","/transport"),$("#ft-lnk-aboutus").attr("href","/aboutus"),$("#ft-lnk-pricing").attr("href","/pricing"),$("#ft-lnk-terms").attr("href","/terms"),$("#ft-lnk-privacypolicy").attr("href","/privacypolicy"),$("#ft-lnk-disclaimer").attr("href","/disclaimer"),$("#ft-lnk-faq").attr("href","/faq"),$("#ft-lnk-contactus").attr("href","/contactus"))}app.run(["authService",function(t){}]),app.run(["$rootScope","$location","authService","localStorageService","customNavigation",function(t,a,o,r,i){t.$on("$routeChangeStart",function(t){console.log(a.path()),"/seller/products"!=a.path()&&"/seller/pricing"!=a.path()||r.get("registeredSeller")||(window.location.href=window.location.origin+"/");var e=!1;angular.forEach(["/buyerprofile","/order/","/orders","/wishlist","/search/transport","/vendorprofile"],function(t){-1!==a.path().indexOf(t)&&(e=!0)}),!o.authentication.isAuth&&e&&(t.preventDefault(),i.onLoginPageClick())})}]),app.config(["$httpProvider","$locationProvider",function(t,e){e.hashPrefix(""),t.interceptors.push("authInterceptorService"),t.interceptors.push("preventTemplateCache")}]),app.factory("preventTemplateCache",["$injector",function(t){return{request:function(t){return-1!==t.url.indexOf(".html")&&(t.url=t.url+"?t="+(new Date).toLocaleString()),t}}}]),app.directive("viewInclude",function(){return{templateUrl:function(t,e){return"/"+e.src}}}),app.directive("autoFocus",["$timeout",function(a){return{restrict:"AC",link:function(t,e){a(function(){window.focus(),e[0].focus()},0)}}}]),app.filter("safeHtml",["$sce",function(e){return function(t){return t?e.trustAsHtml(t):""}}]),app.filter("trustUrl",["$sce",function(e){return function(t){return e.trustAsResourceUrl(t)}}]),app.filter("htmlToPlaintext",["$sce",function(t){return function(t){return t?String(t).replace(/<[^>]+>/gm,""):""}}]),app.directive("moveFocus",function(){return{restrict:"A",link:function(t,o,e){o.on("input",function(t){var e=o.val().length,a=o.val();0==e&&""==a||a.includes(".")||1<=e&&(!isNaN(a)&&Number.isInteger(+a)&&0<=a&&a<10?"field1"==o.attr("id")?document.querySelector("#field2").focus():"field2"==o.attr("id")?document.querySelector("#field3").focus():"field3"==o.attr("id")?document.querySelector("#field4").focus():"field4"==o.attr("id")?document.querySelector("#field5").focus():"field5"==o.attr("id")&&document.querySelector("#field6").focus():o.val(""))})}}}),app.service("authInterceptorService",["$q","$injector","$location","$window","localStorageService","authService",function(o,t,e,a,r,i){var n=this;n.request=function(t){if(-1==t.url.indexOf("https://maps.googleapis.com")){var e=i.authentication.isAuth?i.authentication.loginData.jwtToken:null;e&&(t.headers.Authorization="Bearer "+e)}return t},n.response=function(t){return"application/json; charset=utf-8"===t.headers()["content-type"]?t.data:t},n.responseError=function(t){var e=o.defer();if(401===t.status)e.resolve(s(t));else if(200===t.status)e.resolve(s(t));else if(400===t.status){var a=t.data.message?t.data.message:t.data;"string"==typeof a?(toastr.info(a,"Info"),e.resolve(s(t))):(toastr.error("Invalid or expired session. Re-login again","Error"),e.reject(s(t)))}else 500===t.status?toastr.error(t.data.exceptionMessage,"Error"):(t.status,toastr.error(t.statusText,"Error")),e.resolve(s(t));return e.promise};var s=function(t){return t}}]),app.factory("authService",["$q","$injector","localStorageService","appConstant","$rootScope","DATA_URLS",function(o,r,i,n,e,s){"use strict";var t={},c=!1,u=i.get("authentication")||{isAuth:!1,loginError:"",loginData:{}},l=function(){e.$broadcast("authStatusChanged");var t=e.$$phase;"$apply"!==t&&"$digest"!==t&&e.$apply()},d=function(){u.isAuth=!1,u.loginError="",u.loginData={},i.remove("authentication")},p=function(){(u.isAuth?u.loginData.access_token:null)&&u.loginData.access_token,d(),l()};return t.authentication=u,t.login=function(t){var e=Ladda.create(document.querySelector("#loginbtn"));e.start();var a={email:t.username,password:t.password};t.instance&&(a.instance=t.instance.id),r.get("$http").post(s.Authenticate,a).then(function(t){e.stop(),t.status&&200!=t.status?(d(),-1==t.status?u.loginError="Could not connect. Check your internet connection or try again later":u.loginError=t.data.message,l()):t.isVerified?(u.isAuth=!0,u.loginData={id:t.id,firstName:t.firstName,lastName:t.lastName,email:t.email,phoneNumber:t.phoneNumber,role:t.role,created:t.created,isVerified:t.isVerified,jwtToken:t.jwtToken,image:t.image},i.set("authentication",u),l()):(i.set("registeredBuyer",t),window.location.href="/#otp/verify")})},t.logout=p,t.refreshToken=function(){var a=o.defer(),e="grant_type=refresh_token&refresh_token="+u.loginData.refresh_token+"&client_id="+n.ClientId,t=r.get("$http");if(!c)return c=!0,t.post(s.ROOT_PATH+"token",e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(t){c=!1,u.isAuth=!0,u.loginData={access_token:t.access_token,expires_in:t.expires_in,permissions:t.permissions,userName:t.userName,userid:t.userid,refresh_token:t.refresh_token,userFullName:e.userFullName,type:e.type},i.set("authentication",u),a.resolve(t)}).error(function(t,e){c=!1,p(),a.reject(t)}),a.promise},t.refreshStatus=function(){return c},t}]),app.directive("numberField",function(){return{restrict:"A",require:"?ngModel",link:function(t,e,a,o){o.$parsers.push(function(t){if(null==t)return"";var e=t.replace(/[^0-9]/g,"");return e!==t&&(o.$setViewValue(e),o.$render()),e})}}}),function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(["spin"],e):t.Ladda=e(t.Spinner)}(this,function(i){"use strict";function n(a){if(void 0!==a){a.querySelector(".ladda-label")||(a.innerHTML='<span class="ladda-label">'+a.innerHTML+"</span>");var t=function(t){var e,a=t.offsetHeight;32<a&&(a*=.8),t.hasAttribute("data-spinner-size")&&(a=parseInt(t.getAttribute("data-spinner-size"),10)),t.hasAttribute("data-spinner-color")&&(e=t.getAttribute("data-spinner-color"));var o=.2*a;return new i({color:e||"#fff",lines:12,radius:o,length:.6*o,width:o<7?2:3,zIndex:"auto",top:"auto",left:"auto",className:""})}(a),e=document.createElement("span");e.className="ladda-spinner",a.appendChild(e);var o,r={start:function(){return a.setAttribute("disabled",""),a.setAttribute("data-loading",""),clearTimeout(o),t.spin(e),this.setProgress(0),this},startAfter:function(t){return clearTimeout(o),o=setTimeout(function(){r.start()},t),this},stop:function(){return a.removeAttribute("disabled"),a.removeAttribute("data-loading"),clearTimeout(o),o=setTimeout(function(){t.stop()},1e3),this},toggle:function(){return this.isLoading()?this.stop():this.start(),this},setProgress:function(t){t=Math.max(Math.min(t,1),0);var e=a.querySelector(".ladda-progress");0===t&&e&&e.parentNode?e.parentNode.removeChild(e):(e||((e=document.createElement("div")).className="ladda-progress",a.appendChild(e)),e.style.width=(t||0)*a.offsetWidth+"px")},enable:function(){return this.stop(),this},disable:function(){return this.stop(),a.setAttribute("disabled",""),this},isLoading:function(){return a.hasAttribute("data-loading")}};return s.push(r),r}console.warn("Ladda button target must be defined.")}var s=[];return{bind:function(t,o){o=o||{};var r=[];"string"==typeof t?r=function(t){for(var e=[],a=0;t.length>a;a++)e.push(t[a]);return e}(document.querySelectorAll(t)):"object"==typeof t&&"string"==typeof t.nodeName&&(r=[t]);for(var i=0,e=r.length;i<e;i++)!function(){var t=r[i];if("function"==typeof t.addEventListener){var e=n(t),a=-1;t.addEventListener("click",function(){e.startAfter(1),"number"==typeof o.timeout&&(clearTimeout(a),a=setTimeout(e.stop,o.timeout)),"function"==typeof o.callback&&o.callback.apply(null,[e])},!1)}}()},create:n,stopAll:function(){for(var t=0,e=s.length;t<e;t++)s[t].stop()}}}),String.prototype.limit=function(t){return this.length>t?this.substring(0,t)+"...":this},app.constant("appConstant",{appBaseurl:"/",ClientId:"ngAuthApp",HomePageCarouselSize:15,PaginationRangeSize:5,MasterTypeList:[{id:1,text:"Country"},{id:2,text:"City"},{id:3,text:"Business Type"},{id:4,text:"Timezone"},{id:5,text:"State"}],LocalStorageKeys:{SearchFormData:"srch_frm_data"},SortBy:[{id:1,text:"Most Relevant"},{id:2,text:"A to Z"},{id:3,text:"Z to A"}],MarketPlaceSortBy:[{id:1,text:"Most Relevant"},{id:2,text:"Price - Low to High"},{id:3,text:"Price - High to Low"},{id:4,text:"Newest First"}]}),app.constant("DATA_URLS",function(){"use strict";return{BASEURL:baseUrl,ROOT_PATH:"/",DEFAULT_PATH:"/dashboard",Authenticate:baseUrl+"Accounts/Authenticate",VerifyPhone:baseUrl+"Accounts/verify-phone",ReSendMobileOTP:baseUrl+"Accounts/resend-mobile-otp",FORGOT_PASSWORD:baseUrl+"Accounts/forgot-password",VERIFY_OTP:baseUrl+"Accounts/validate-reset-token",VerifyEmailOTP:baseUrl+"Accounts/VerifyEmailOTP",UPDATE_EMAIL:baseUrl+"Accounts/UpdateEmail",UPDATE_PHONENO:baseUrl+"Accounts/UpdatePhoneNo",UPDATE_USER:baseUrl+"Accounts/Update",GET_USER:baseUrl+"Accounts/Get",UPLOAD_PROFILE_IMAGE:baseUrl+"Accounts/UploadImage",DELETE_PROFILE_IMAGE:baseUrl+"Accounts/DeleteImage",REGISTER:baseUrl+"Accounts/Register",UPLOAD_IMAGE:baseUrl+"Accounts/UploadImage",VerifyEmail:baseUrl+"Accounts/verify-email",ReSendEmailOTP:baseUrl+"Accounts/resend-email-otp",RESET_PASSWORDLOGIN:baseUrl+"Accounts/resetPasswordLogin",RESET_PASSWORD:baseUrl+"Accounts/reset-password",LIST_ACTIVEMV:baseUrl+"api/Common/ActiveList",LIST_PAGEBANNER:baseUrl+"api/Common/PageBannerList",ADD_ENQUIRY:baseUrl+"api/Common/AddEnquiry",POPULAR_LOCATION:baseUrl+"api/Common/PopularLocation",POPULAR_SEARCH:baseUrl+"api/Common/PopularSearch",LIST_HOMEPAGE_SERVICE:baseUrl+"api/Common/HomePageServiceList",LIST_HOMEPAGE_EVENT:baseUrl+"api/Common/HomePageEventList",EVENT_DATA:baseUrl+"api/Common/EventData",LIST_ACTIVE_EVENT:baseUrl+"api/Common/ActiveEventList",ADD_PRODUCT_ENQUIRY:baseUrl+"api/Common/AddProductEnquiry",LIST_PRODUCT_ENQUIRY:baseUrl+"api/Common/ProductEnquiryList",ADD_NEWSLETTER:baseUrl+"api/Common/AddNewsLetter",NEW_SERVICE:baseUrl+"api/Service/Add",LIST_SERVICE:baseUrl+"api/Service/List",GET_SERVICE:baseUrl+"api/Service/Get",UPDATE_SERVICE:baseUrl+"api/Service/Update",DELETE_SERVICE:baseUrl+"api/Service/Delete",LIST_SERVICEIMAGES:baseUrl+"api/Service/ListServiceImages",EDIT_SERVICEIMAGE:baseUrl+"api/Service/EditServiceImage",DELETEFEATUREDIMAGE_SERVICE:baseUrl+"api/Service/DeleteFeaturedImage",REMOVE_SERVICEIMAGE:baseUrl+"api/Service/RemoveServiceImage",UPLOAD_SERVICEFEATUREIMAGE:baseUrl+"api/Service/UploadServiceFeaturedImage",UPLOAD_SERVICEIMAGE:baseUrl+"api/Service/UploadServiceImage",FRONT_LIST_SERVICE:baseUrl+"api/Service/ListService",VIEW_AND_GET_SERVICE:baseUrl+"api/Service/ViewAndGetService",FRONT_LIST_ACTIVESERVICEIMAGES:baseUrl+"api/Service/ListActiveServiceImages",LIST_POPULAR_SERVICE:baseUrl+"api/Service/PopularServiceList",SEARCH_SERVICE:baseUrl+"api/Service/Search",GET_SERVICE_FOR_REVIEW:baseUrl+"api/Service/GetService",DELETE_SERVICE_TIME:baseUrl+"api/Service/DeleteServiceTiming",NEW_PRODUCT:baseUrl+"api/Product/Add",LIST_PRODUCT:baseUrl+"api/Product/List",GET_PRODUCT:baseUrl+"api/Product/Get",UPDATE_PRODUCT:baseUrl+"api/Product/Update",DELETE_PRODUCT:baseUrl+"api/Product/Delete",LIST_PRODUCTIMAGES:baseUrl+"api/Product/ListProductImages",EDIT_PRODUCTIMAGE:baseUrl+"api/Product/EditProductImage",DELETEFEATUREDIMAGE_PRODUCT:baseUrl+"api/Product/DeleteFeaturedImage",REMOVE_PRODUCTIMAGE:baseUrl+"api/Product/RemoveProductImage",UPLOAD_PRODUCTFEATUREIMAGE:baseUrl+"api/Product/UploadProductFeaturedImage",UPLOAD_PRODUCTIMAGE:baseUrl+"api/Product/UploadProductImage",SEARCH_PRODUCT:baseUrl+"api/Product/Search",FRONT_GET_PRODUCT:baseUrl+"api/Product/GetProduct",FRONT_LIST_ACTIVEPRODUCTIMAGES:baseUrl+"api/Product/ListActiveProductImages",LIST_RELATEDPRODUCT:baseUrl+"api/Product/ListRelatedProduct",GET_PRODUCT_FOR_REVIEW:baseUrl+"api/Product/GetProductForReview",LIST_CATEGORY:baseUrl+"api/Category/List",LIST_SERVICE_REVIEW:baseUrl+"api/ServiceReivew/List",ADD_SERVICE_REVIEW:baseUrl+"api/ServiceReivew/Add",UPLOAD_SERVIC_IMAGE:baseUrl+"api/ServiceReivew/UploadImage",LIST_ALL_SERVICE_REVIEW:baseUrl+"api/ServiceReivew/ListAll",STAR_COUNT_SERVICE_REVIEW:baseUrl+"api/ServiceReivew/ServiceStarCount",REVIEW_LIST_FOR_BUSINESS:baseUrl+"api/ServiceReivew/ListForBussinessUser",LIST_BOOK_MARK:baseUrl+"api/WishList/List",ADD_BOOK_MARK:baseUrl+"api/WishList/Add",DELETE_BOOK_MARK:baseUrl+"api/WishList/Delete",LIST_PRODUCT_REVIEW:baseUrl+"api/ProductReview/List",ADD_PRODUCT_REVIEW:baseUrl+"api/ProductReview/Add",UPLOAD_PRODUCT_IMAGE:baseUrl+"api/ProductReview/UploadImage",LIST_ALL_PRODUCT_REVIEW:baseUrl+"api/ProductReview/ListAll",STAR_COUNT_PRODUCT_REVIEW:baseUrl+"api/ProductReview/ProductStarCount",REVIEW_LIST_FOR_PRODUCT:baseUrl+"api/ProductReview/ListForBussinessUser",PROFILE_DASHBOARD:baseUrl+"api/Common/DashboardResult"}}()),app.config(["$routeProvider","DATA_URLS",function(t,e){t.when("/",{templateUrl:e.ROOT_PATH+"app/home/home.html"}).when("/otp/verify",{templateUrl:e.ROOT_PATH+"app/register/otpScreen.html",controller:"otpScreenController"}).when("/forgotpassword",{templateUrl:e.ROOT_PATH+"app/login/forgotPassword.html",controller:"forgotPasswordController"}).when("/resetpassword",{templateUrl:e.ROOT_PATH+"app/login/resetPassword.html",controller:"resetPasswordController"}).when("/profile",{templateUrl:e.ROOT_PATH+"app/profile/profile.html",controller:"profileController"}).when("/mylisting",{templateUrl:e.ROOT_PATH+"app/profile/mylisting/listingList.html",controller:"listingListController"}).when("/listing/new",{templateUrl:e.ROOT_PATH+"app/profile/mylisting/newListing.html",controller:"newListingController"}).when("/listing/:uid",{templateUrl:e.ROOT_PATH+"app/profile/mylisting/listingDetails.html",controller:"listingDetailsController"}).when("/product/new/:uid",{templateUrl:e.ROOT_PATH+"app/profile/product/newProduct.html",controller:"newProductController"}).when("/product/:uid",{templateUrl:e.ROOT_PATH+"app/profile/product/productDetails.html",controller:"productDetailsController"}).when("/thankyou",{templateUrl:e.ROOT_PATH+"app/thankyou/thankyou.html",controller:"thankyouController"}).when("/productdetail/:pname/:uid",{templateUrl:e.ROOT_PATH+"app/product/productDetails.html",controller:"frontProductDetailsController"}).when("/profile/details",{templateUrl:e.ROOT_PATH+"app/profile/profileDetails.html",controller:"profileDetailsController"}).when("/changepassword",{templateUrl:e.ROOT_PATH+"app/profile/changepassword/changePassword.html",controller:"changePasswordController"}).when("/search/listing",{templateUrl:e.ROOT_PATH+"app/service/searchServiceListing.html",controller:"searchServiceListingController"}).when("/business/reviews/:name/:uid",{templateUrl:e.ROOT_PATH+"app/servicereviews/serviceReviews.html",controller:"serviceReviewsController"}).when("/enquiries",{templateUrl:e.ROOT_PATH+"app/profile/enquiry/enquiryList.html",controller:"enquiryListController"}).when("/bookmarkList",{templateUrl:e.ROOT_PATH+"app/profile/bookmark/bookmarkList.html",controller:"bookmarkListController"}).when("/product/reviews/:name/:uid",{templateUrl:e.ROOT_PATH+"app/productreviews/productReviews.html",controller:"productreviewsController"}).when("/reviewList",{templateUrl:e.ROOT_PATH+"app/profile/reviewlist/reviewList.html",controller:"reviewListController"}).otherwise({redirectTo:"/"})}]),app.filter("sumOfValue",function(){return function(t,a){if(angular.isUndefined(t)||angular.isUndefined(a))return 0;var o=0;return angular.forEach(t,function(t,e){o+=parseFloat(t[a])}),o}}),app.factory("customNavigation",["$location",function(e){"use strict";var t={};return t.onLoginClick=function(){mobileApp||setTimeout(function(){$("#sign-popup").toggleClass("active"),$("#register-popup").removeClass("active"),$(".wrapper").addClass("overlay-bgg")},300)},t.onLoginPageClick=function(){mobileApp?e.path("/login"):window.location.href="/login"},t.onHomeClick=function(){mobileApp||(window.location.href="/")},t.onSellerVerifyClick=function(){mobileApp||(window.location.href=window.location.origin+"/#/seller/verify")},t.onSellerLoginClick=function(){window.location.href="https://seller.tradeify.in/"},t.onForgotPasswordClick=function(){mobileApp?e.path("/forgotpassword"):setTimeout(function(){window.location.href=window.location.origin+"/#/forgotpassword"},100)},t.onNearByTransportClick=function(){mobileApp?e.path("/search/transport"):window.location.href=window.location.origin+"/#/search/transport"},t.onVendorProfileClick=function(t){mobileApp?e.path("vendorprofile/"+t.id+"/"+t.companyName):window.location.href=window.location.origin+"/#/vendorprofile/"+t.id+"/"+t.companyName},t}]),app.controller("advertiseHereController",["$scope","authService","$rootScope","$window","$location","DATA_URLS","$http","appConstant",function(a,t,e,o,r,i,n,s){"use strict";a.formData={},a.submit=function(){var e=Ladda.create(document.querySelector("#createbtn"));e.start();var t=angular.copy(a.formData);t.type=1,n.post(i.ADD_ENQUIRY,t).then(function(t){e.stop(),t.status&&200!==t.status||(toastr.success("Thanks For Contacting us. We will reach out shortly.","Success"),a.formData={})})}}]),app.controller("contactusController",["$scope","authService","$rootScope","$window","$location","DATA_URLS","$http","appConstant",function(a,t,e,o,r,i,n,s){"use strict";a.formData={},a.submit=function(){var e=Ladda.create(document.querySelector("#createbtn"));e.start();var t=angular.copy(a.formData);t.type=3,n.post(i.ADD_ENQUIRY,t).then(function(t){e.stop(),t.status&&200!==t.status||(toastr.success("Thanks For Contacting us. We will reach out shortly.","Success"),a.formData={})})}}]),app.controller("helpSupportController",["$scope","authService","$rootScope","$window","$location","DATA_URLS","$http","appConstant","$filter",function(a,t,e,o,r,i,n,s,c){"use strict";a.formData={},a.submit=function(){var e=Ladda.create(document.querySelector("#createbtn"));e.start();var t=angular.copy(a.formData);t.type=2,n.post(i.ADD_ENQUIRY,t).then(function(t){e.stop(),t.status&&200!==t.status||(toastr.success("Thanks For Contacting us. We will reach out shortly.","Success"),a.formData={})})}}]),app.controller("newsController",["$scope","authService","$rootScope","$window","$location","DATA_URLS","$http","appConstant",function(t,e,a,o,r,i,n,s){}]),app.controller("newsLetterController",["$scope","authService","$rootScope","$window","$location","DATA_URLS","$http","appConstant",function(a,t,e,o,r,i,n,s){"use strict";a.formData={},a.submit=function(){var e=Ladda.create(document.querySelector("#createbtn"));e.start();var t=angular.copy(a.formData);n.post(i.ADD_NEWSLETTER,t).then(function(t){e.stop(),t.status&&200!==t.status||(toastr.success("Your email registered successfully","Success"),window.location.href="/")})}}]),app.controller("freeToolsController",["$scope","authService","$rootScope","$window","$location","DATA_URLS","$http","appConstant",function(t,e,a,o,r,i,n,s){}]),app.controller("homeController",["$scope","$rootScope","$window","$location","$http","authService","DATA_URLS","$filter","appConstant","localStorageService","customNavigation",function(e,t,a,o,r,i,n,s,c,u,l){"use strict";var d;function p(t){var e={types:["(regions)"]};t&&(e.componentRestrictions={country:t});var a=document.getElementById("location");d=new google.maps.places.Autocomplete(a,e),google.maps.event.addListener(d,"place_changed",function(){})}e.pageBannerList=[],e.popularServiceListList=[],e.popularSearchList=[],e.popularLocationList=[],e.homePageServiceListList=[],e.homePageEventList=[],e.eventData=[],e.countryList=[],e.businessTypeList=[],e.selectedService=null,navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){e.latitude=t.coords.latitude,e.longitude=t.coords.longitude}),e.latitude=null,e.longitude=null,e.formData={},p(null),r.post(n.LIST_PAGEBANNER,{type:1}).then(function(t){t.status&&200!=t.status||(e.pageBannerList=t,angular.forEach(e.pageBannerList,function(t){t.image&&(t.image=t.image.replace(/\\/g,"/"),t.image=n.BASEURL+t.image)}),setTimeout(function(){$("#main_bnr").owlCarousel({loop:!0,margin:10,nav:!1,dots:!0,autoplay:!0,autoplayTimeout:4e3,autoplayHoverPause:!1,responsive:{0:{items:1,autoplay:!1},600:{items:1},1e3:{items:1}}}),0<e.pageBannerList.length&&$(".dum_bnr").hide()},500))}),r.post(n.LIST_POPULAR_SERVICE,{}).then(function(t){t.status&&200!=t.status||(e.popularServiceListList=t,angular.forEach(e.popularServiceListList,function(t){t.featuredImage&&(t.featuredImage=t.featuredImage.replace(/\\/g,"/"),t.featuredImage=n.BASEURL+t.featuredImage),t.listingTitle&&51<t.listingTitle.length&&(t.listingTitle=t.listingTitle.limit(48))}),setTimeout(function(){$("#place_slide").owlCarousel({loop:!1,margin:10,nav:!0,dots:!1,autoplay:!0,autoplayTimeout:4e3,autoplayHoverPause:!1,responsive:{0:{items:1},600:{items:2},1e3:{items:3}}})},500))}),r.post(n.POPULAR_LOCATION,{}).then(function(t){t.status&&200!=t.status||(e.popularLocationList=t.locations)}),r.post(n.POPULAR_SEARCH,{}).then(function(t){t.status&&200!=t.status||(e.popularSearchList=t.searches)}),r.post(n.LIST_HOMEPAGE_SERVICE,{type:3}).then(function(t){t.status&&200!=t.status||(e.homePageServiceListList=t,angular.forEach(e.homePageServiceListList,function(t){t.imageName&&(t.imageName=t.imageName.replace(/\\/g,"/"),t.imageName=n.BASEURL+t.imageName),t.text?t.textTrim=t.text.limit(20):t.textTrim=t.text,t.description?50<t.description.length&&(t.description=t.description.limit(47)):t.description="Explore all "+t.text.toLowerCase()+" services"}),setTimeout(function(){$("#service_home_slid").owlCarousel({loop:!1,margin:10,nav:!0,dots:!1,autoplay:!0,autoplayTimeout:4e3,autoplayHoverPause:!1,responsive:{0:{items:1},600:{items:3},1e3:{items:4}}})},500))}),r.post(n.LIST_HOMEPAGE_EVENT).then(function(t){t.status&&200!=t.status||(e.homePageEventList=t,angular.forEach(e.homePageEventList,function(t){t.listingBanner&&(t.listingBanner=n.BASEURL+t.listingBanner),t.homePageBanner&&(t.homePageBanner=n.BASEURL+t.homePageBanner),t.shortDescription&&200<t.shortDescription.length&&(t.shortDescription=t.shortDescription.limit(197))}),setTimeout(function(){$("#follow_slide").owlCarousel({loop:!0,margin:10,nav:!0,items:1,dots:!1,autoplay:!1,autoplayTimeout:4e3,autoplayHoverPause:!1,responsive:{0:{items:1,loop:!1,margin:0},600:{items:1},1e3:{items:1}}})},500))}),r.post(n.EVENT_DATA).then(function(t){t.status&&200!=t.status||(e.eventData=t,angular.forEach(e.eventData,function(t){t.shortDescription&&60<t.shortDescription.length&&(t.shortDescription=t.shortDescription.limit(57))}))}),r.post(n.LIST_ACTIVEMV,{type:1}).then(function(t){t.status&&200!=t.status||(e.countryList=t)}),r.post(n.LIST_ACTIVEMV,{type:3}).then(function(t){t.status&&200!=t.status||(e.businessTypeList=t)}),e.geolocate=function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){var e={lat:t.coords.latitude,lng:t.coords.longitude},a=new google.maps.Circle({center:e,radius:t.coords.accuracy});d.setBounds(a.getBounds())})},e.onServiceClick=function(t){u.set("serviceId",t.id),window.location.href=window.location.origin+"/service/details"},e.onSearchClick=function(){var t=angular.copy(e.formData);t.location=$("#location").val(),u.set(c.LocalStorageKeys.SearchFormData,t),o.path("/search/listing")},e.onCountryChange=function(){$("#location").val(""),p(e.formData.country.shortCode)},e.onAddBookMark=function(e){r.post(n.ADD_BOOK_MARK,e.id).then(function(t){t.status&&200!=t.status||(toastr.success("Book mark added successfully.","Success"),e.isBookMarked=!0,e.totalBookMarkedCount=e.totalBookMarkedCount+1)})},e.onAddBookMarkClick=function(t){e.selectedService=t,console.log(t),e.isUserAuthenticated?e.onAddBookMark(t):$("#hdforbookmark").click()}}]),app.controller("mainController",["$scope","$rootScope","$window","$location","$http","authService","DATA_URLS","$filter","localStorageService","customNavigation",function(t,e,a,o,r,i,n,s,c,u){"use strict";t.userData={},t.isUserAuthenticated=i.authentication.isAuth,t.userName="",t.fullName="",t.firstName="",t.isUserAuthenticated&&(t.userData=i.authentication.loginData),t.userData.image&&(t.userData.image=n.BASEURL+t.userData.image);var l=e.$on("authStatusChanged",function(){t.userData={},t.isUserAuthenticated=i.authentication.isAuth,t.isUserAuthenticated&&(t.userData=c.get("authentication").loginData,t.userData.image&&(t.userData.image=n.BASEURL+t.userData.image))});t.$on("$destroy",function(){l()}),t.onProfileClick=function(){mobileapp?o.path("/profile"):window.location.href="/#profile"},t.onAddListingClick=function(){mobileapp?o.path("/listing/new"):window.location.href="/#listing/new"},t.logOut=function(){i.logout(),toastr.success("You are successfully logged out.","Success"),setTimeout(function(){window.location.href="/"},300)}}]),app.controller("personaldetailsController",["$scope","$rootScope","$window","$location","$http","authService","DATA_URLS","$filter","productService","localStorageService",function(e,t,a,o,r,i,n,s,c,u){"use strict";e.editFormData={};var l=t.$on("onProfileChange",function(t,e){d()});function d(){r.post(n.GET_CUSTOMER).then(function(t){t.status&&200!=t.status||(e.editFormData=t,e.editFormData.imageName&&(e.editFormData.imageName=n.BASEURL+e.editFormData.imageName))})}d(),e.$on("$destroy",function(){l()})}]),app.controller("pushmenuController",["$scope","$rootScope","$window","$location","$http","authService","DATA_URLS","$filter","appConstant",function(e,t,a,o,r,i,n,s,c){"use strict";e.categories=[],e.products=[],r.post(n.LIST_CATEGORY).then(function(t){t.status&&200!=t.status||(e.categories=t,angular.forEach(e.categories,function(t){t.catname=t.name.replace(/\s+/g,"").trim(),t.catname=t.catname.replace(/[^a-zA-Z ]/g,"")}),setTimeout(function(){jQuery("#dismiss, .overlay, .dimissLink").on("click",function(){jQuery("#sidebar").removeClass("active"),jQuery(".overlay").fadeOut()})},150))}),r.post(n.LIST_PRODUCT).then(function(t){t.status&&200!=t.status||(e.products=t)})}]),app.controller("forgotPasswordController",["$scope","authService","$rootScope","$window","$location","DATA_URLS","$http","appConstant","localStorageService",function(a,t,e,o,r,i,n,s,c){"use strict";a.formData={},a.isUserAuthenticated=t.authentication.isAuth,a.isUserAuthenticated&&r.path("/");var u=e.$on("authStatusChanged",function(){t.authentication.isAuth&&(a.isUserAuthenticated=t.authentication.isAuth,r.path("/"))});a.$on("$destroy",function(){u()}),a.submit=function(){var e=Ladda.create(document.querySelector("#btn1"));e.start();var t=angular.copy(a.formData);n.post(i.FORGOT_PASSWORD,t).then(function(t){e.stop(),t.status&&200!==t.status||(c.set("userDetails",a.formData),toastr.success("OTP send to your registered email id.","Success"),r.path("/resetpassword"),a.formData={})})}}]),app.controller("resetPasswordController",["$scope","authService","$rootScope","$window","$location","DATA_URLS","$http","appConstant","$routeParams","localStorageService",function(a,t,e,o,r,i,n,s,c,u){"use strict";a.userData=u.get("userDetails"),a.editFormData={},a.formData={},a.isVerified=!1,a.isUserAuthenticated=t.authentication.isAuth,a.isUserAuthenticated&&r.path("/");var l=e.$on("authStatusChanged",function(){t.authentication.isAuth&&(a.isUserAuthenticated=t.authentication.isAuth,r.path("/"))});a.$on("$destroy",function(){l()}),null!=c.u&&(a.mobileoremail=c.u),a.submit=function(){var e=Ladda.create(document.querySelector("#btn2"));e.start();var t=angular.copy(a.formData);n.post(i.VERIFY_OTP,t).then(function(t){e.stop(),t.status&&200!==t.status?a.otpError=t.data.message:(a.isOtpVerified=!0,a.isOtpSend=!1,a.loginError="",a.isVerified=!0)})},a.resetPassword=function(){if(a.formData.password==a.formData.confirmPassword){var e=Ladda.create(document.querySelector("#btn3"));e.start();var t=angular.copy(a.formData);n.post(i.RESET_PASSWORDLOGIN,t).then(function(t){e.stop(),t.status&&200!==t.status||(alert("Password reset successfully."),setTimeout(function(){window.location.href="/login"},100))})}else alert("Password & confirm password does not match.")},a.resendOTP=function(){var t=angular.copy(a.userData);n.post(i.FORGOT_PASSWORD,t).then(function(t){t.status&&200!==t.status||(a.isResend=!0)})}}]),app.controller("login",["$scope","$rootScope","$window","$location","$http","authService","DATA_URLS","$filter","customNavigation",function(e,t,a,o,r,i,n,s,c){"use strict";e.isUserAuthenticated=i.authentication.isAuth,e.isSigningIn={value:!1},e.loginError={value:""},e.signinData={},e.isUserAuthenticated&&(window.location.href="/");var u=t.$on("authStatusChanged",function(){e.isSigningIn.value=!1,i.authentication.isAuth?(toastr.success("You are successfully logged in","Success"),e.onHomeClick()):e.loginError.value=i.authentication.loginError});e.signIn=function(){e.isSigningIn.value=!0,e.loginError.value="",i.login(e.signinData)},e.getUserName=function(){r.post(n.USER_FINDBYMOBILEOREMAIL,{mobileOrEmail:e.signinData.mobileoremail}).then(function(t){t.status&&200!==t.status?e.loginError.value="Invalid Username":(e.signinData.username=t.userName,e.loginError.value="")})},e.clearUserName=function(){e.signinData={}},e.forgotPassword=function(){mobileapp?o.path("/forgotpassword"):window.location.href=window.location.origin+"/#/forgotpassword"},e.navigateToSignUp=function(){mobileapp?o.path("/signup"):window.location.href="/signup"},e.onHomeClick=function(){mobileapp,window.location.href="/"},e.$on("$destroy",function(){u()}),e.onForgotPasswordClick=function(){window.location.href="/#forgotpassword"},e.onRegisterClick=function(){window.location.href="/register"}}]),app.controller("marketPlaceController",["$scope","authService","$rootScope","$window","$location","DATA_URLS","$http","appConstant","$anchorScroll","localStorageService",function(o,t,e,a,r,i,n,s,c,u){"use strict";c(),o.recordList=[],o.categoryList=[],o.pageBannerList=[],o.searchFormData={},o.srchCount=0,o.filters=[],o.sortByList=s.MarketPlaceSortBy,o.searchFormData.sortBy=o.sortByList[1],o.pageSize=5,o.pageNumber=1;var l=u.get(s.LocalStorageKeys.MarketPlaceSearchFormData);function d(a){var t=function(){var t={};o.searchFormData.sortBy&&(t.sortBy=o.searchFormData.sortBy.id);return t.pageSize=o.pageSize,t.pageNumber=o.pageNumber,t.searchTerm=o.searchFormData.searchTerm,t.category=o.searchFormData.category,t}();t.includeFilters=a,t.category&&(t.category=t.category.id),n.post(i.SEARCH_PRODUCT,t).then(function(t){if(!t.status||200==t.status){var e=t.listing;0<e.length&&$(".grid_dum").hide(),angular.forEach(e,function(t,e){o.recordList.push(t)}),0==e.length&&1==o.pageNumber?o.nomoreresult="No post found matching your search":0==e.length&&1<o.pageNumber?o.nomoreresult="It looks like there are no more search results matching":o.pageSize>e.length?o.nomoreresult="It looks like there are no more search results matching":o.nomoreresult=null,o.srchCount=t.total,a&&(o.filters=t.filters),angular.forEach(o.recordList,function(t){t.imageName&&(t.imageName=t.imageName.replace(/\\/g,"/"),t.imageName=i.BASEURL+t.imageName)})}})}l&&(o.searchFormData=l,selectCategory()),d(!0),n.post(i.LIST_PAGEBANNER,{type:2}).then(function(t){t.status&&200!=t.status||(o.pageBannerList=t,angular.forEach(o.pageBannerList,function(t){t.image=t.image.replace(/\\/g,"/"),t.image=i.BASEURL+t.image}),setTimeout(function(){$("#mrkt_plc").owlCarousel({loop:!0,margin:10,nav:!1,dots:!0,autoplay:!0,autoplayTimeout:4e3,autoplayHoverPause:!1,responsive:{0:{items:1},600:{items:1},1e3:{items:1}}}),0<o.pageBannerList.length&&$(".dum_inr_bnr").hide()},500))}),n.post(i.LIST_CATEGORY,{}).then(function(t){t.status&&200!=t.status||(o.categoryList=t)}),o.onProductClick=function(t){window.location.href="/#/productdetail/"+t.name+"/"+t.id},o.onSearchClick=function(){u.get(s.LocalStorageKeys.SearchFormData)&&u.remove(s.LocalStorageKeys.SearchFormData),o.recordList=[],o.pageNumber=1,d(!(o.nomoreresult=null))},o.onClearClick=function(){u.get(s.LocalStorageKeys.SearchFormData)&&u.remove(s.LocalStorageKeys.SearchFormData),o.searchFormData={},o.searchFormData.sortBy=o.sortByList[1],$("#location").val(""),o.nomoreresult=null,o.recordList=[],o.pageNumber=1,d(!0)},o.onViewMoreResult=function(){o.pageNumber++,d(!0)},o.onSortChange=function(){o.pageNumber=1,o.recordList=[],d(!(o.srchCount=0))}}]),app.controller("otherServicesController",["$scope","authService","$rootScope","$window","$location","DATA_URLS","$http","appConstant",function(t,e,a,o,r,i,n,s){}]),app.controller("frontProductDetailsController",["$scope","authService","$rootScope","$window","$location","DATA_URLS","$http","appConstant","$routeParams","$anchorScroll","$timeout",function(s,t,e,a,o,r,i,n,c,u,l){"use strict";var d;function p(){$("#prod_sub_slid").owlCarousel({loop:!0,margin:10,nav:!0,dots:!1,responsive:{0:{items:3},600:{items:3},1e3:{items:3}}})}function m(t){i.post(r.STAR_COUNT_PRODUCT_REVIEW,t).then(function(t){var e,a,o,r,i,n;t.status&&200!=t.status||(s.productReviewCount=t,0<s.productReviewCount.totalCount&&(e=s.productReviewCount.oneStar,a=s.productReviewCount.twoStar,o=s.productReviewCount.threeStar,r=s.productReviewCount.fourStar,i=s.productReviewCount.fiveStar,n=s.productReviewCount.totalCount,s.reviewAveragecount=Math.round((5*i+4*r+3*o+2*a+1*e)/n)),s.productReviewCount.oneStarPer=0==s.productReviewCount.oneStar?0:s.productReviewCount.oneStar/s.productReviewCount.totalCount*100,s.productReviewCount.twoStarPer=0==s.productReviewCount.twoStar?0:s.productReviewCount.twoStar/s.productReviewCount.totalCount*100,s.productReviewCount.threeStarPer=0==s.productReviewCount.threeStar?0:s.productReviewCount.threeStar/s.productReviewCount.totalCount*100,s.productReviewCount.fourStarPer=0==s.productReviewCount.fourStar?0:s.productReviewCount.fourStar/s.productReviewCount.totalCount*100,s.productReviewCount.fiveStarPer=0==s.productReviewCount.fiveStar?0:s.productReviewCount.fiveStar/s.productReviewCount.totalCount*100)})}u(),s.editFormData={},s.productList=[],s.categoryList=[],s.productImages=[],s.formData={},s.userDate={},s.isUserAuthenticated=t.authentication.isAuth,s.isRatingZero=!1,s.productReviewCount={},s.totalCount=0,s.reviewAveragecount=0,s.reviewWidthPercentage={},s.productReviewList=[],null!=c.uid&&(d=c.uid,i.post(r.FRONT_GET_PRODUCT,d).then(function(t){var e;t.status&&200!=t.status||(s.editFormData=t,s.editFormData.imageName&&(s.editFormData.imageName=s.editFormData.imageName.replace(/\\/g,"/"),s.editFormData.imageName=r.BASEURL+s.editFormData.imageName),e={categoryId:s.editFormData.category.id},i.post(r.LIST_RELATEDPRODUCT,e).then(function(t){t.status&&200!=t.status||(s.productList=[],angular.forEach(t,function(t){t.id!=s.editFormData.id&&s.productList.push(t)}),angular.forEach(s.productList,function(t){t.imageName&&(t.imageName=t.imageName.replace(/\\/g,"/"),t.imageName=r.BASEURL+t.imageName),t.shortDescription&&51<t.shortDescription.length&&(t.shortDescription=t.shortDescription.limit(48))}),setTimeout(void $("#rela_prod_slid").owlCarousel({loop:!1,margin:10,nav:!0,dots:!1,responsive:{0:{items:1},600:{items:1},1e3:{items:2}}}),500))}),s.listPI(),s.listProductReviews())}),i.post(r.LIST_CATEGORY,{}).then(function(t){t.status&&200!=t.status||(s.categoryList=t)}),m(c.uid)),s.isUserAuthenticated&&(s.userData=t.authentication.loginData,s.formData.phoneNumber=s.userData.phoneNumber,s.formData.name=s.userData.firstName+s.userData.lastName,s.formData.email=s.userData.email),s.listPI=function(){var t={productId:s.editFormData.id};i.post(r.FRONT_LIST_ACTIVEPRODUCTIMAGES,t).then(function(t){t.status&&200!=t.status||(s.productImages=t,angular.forEach(s.productImages,function(t){t.fileName&&(t.fileName=t.fileName.replace(/\\/g,"/"),t.fileName=r.BASEURL+t.fileName)}),setTimeout(p,500))})},s.onProductClick=function(t){window.location.href="/#/productdetail/"+t.name+"/"+t.id},s.sendEnquiry=function(){var e=Ladda.create(document.querySelector("#enqrybtn"));e.start();var t=angular.copy(s.formData);t.productId=s.editFormData.id,i.post(r.ADD_PRODUCT_ENQUIRY,t).then(function(t){e.stop(),t.status&&200!=t.status||(toastr.success("Enquiry sent successfully.","Success"),$("#editBox").click(),s.formData={})})},s.onRegisterAndSendEnquiry=function(){if(s.formData.password==s.formData.confirmPassword){var e=Ladda.create(document.querySelector("#enqrybtn"));e.start();var t=angular.copy(s.formData);t.productId=s.editFormData.id,t.firstName=t.name,i.post(r.REGISTER,t).then(function(t){e.stop(),t.status&&200!=t.status||(toastr.success("Registration & Enquiry sent successfully.","Success"),$("#editBox").click(),s.formData={})})}else alert("Password & confirm password does not match.")},s.onSendEnquiryClick=function(){l(function(){s.isUserAuthenticated?$("#message").focus():$("#name").focus()},500)},s.onSubmitClick=function(){s.isUserAuthenticated?s.sendEnquiry():s.onRegisterAndSendEnquiry()},s.submitReview=function(){if(0!=s.formData.review&&null!=s.formData.review){s.selectRating=!0;var e=Ladda.create(document.querySelector("#enqrybtn"));e.start();var t=angular.copy(s.formData);t.productId=s.editFormData.id,t.review=parseInt(t.review),i.post(r.ADD_PRODUCT_REVIEW,t).then(function(t){e.stop(),t.status&&200!=t.status||(toastr.success("Review submitted successfully.","Success"),$("#editReviewBox").click(),s.formData={},s.totalCount+=1,m(c.uid))})}else s.isRatingZero=!0},s.onReviewSubmitClick=function(){s.isUserAuthenticated&&s.submitReview()},s.onRatingClick=function(t){s.formData.review=t},s.listProductReviews=function(){var t={productId:s.editFormData.id};i.post(r.LIST_PRODUCT_REVIEW,t).then(function(t){t.status&&200!=t.status||(s.productReviewList=t.list,s.totalCount=t.totalCount)})},s.viewAllReviews=function(){u(),window.location.href="/#/product/reviews/"+s.editFormData.name+"/"+s.editFormData.id}}]),app.controller("otpScreenController",["$scope","authService","$rootScope","$window","$location","DATA_URLS","$http","appConstant","$anchorScroll","localStorageService",function(a,t,e,o,r,i,n,s,c,u){"use strict";c(),a.formData={},a.registeredBuyer=u.get("registeredBuyer"),a.submit=function(){var e=Ladda.create(document.querySelector("#btnverifyotp"));e.start();var t={token:a.formData.token,id:a.registeredBuyer.id};n.post(i.VerifyEmail,t).then(function(t){e.stop(),t.status&&200!=t.status||(alert("You have Successfully Verified "),u.remove("registeredBuyer"),mobileapp?r.path("/login"):window.location.href="/login")},function(t){e.stop(),alert(t.data.message)})},a.onResendOtp=function(){var e=Ladda.create(document.querySelector("#btnresendotp"));e.start(),n.post(i.ReSendEmailOTP,a.registeredBuyer.id).then(function(t){e.stop(),t.status&&200!=t.status||alert("OTP resend to your email "+a.registeredBuyer.email)},function(t){e.stop(),alert(t.data.message)})}}]),app.controller("registerController",["$scope","authService","$rootScope","$window","$location","DATA_URLS","$http","appConstant","localStorageService","$filter",function(o,t,e,a,r,i,n,s,c,u){"use strict";o.countryList=[],o.businessTypeList=[],o.cityList=[],o.stateList=[],o.formData={};var l,d,p,m,g=o.imageFiles=null;l=document.getElementById("select-ml"),(d=new google.maps.places.Autocomplete(l)).setComponentRestrictions({}),d.setFields(["address_components","geometry","icon","name"]),d.addListener("place_changed",function(){var t=d.getPlace();t.geometry?($("#lat").val(t.geometry.location.lat()),$("#lng").val(t.geometry.location.lng()),function(){if($("#lat").val()&&$("#lng").val()){var t={lat:parseFloat($("#lat").val()),lng:parseFloat($("#lng").val())};h?(h.setCenter(t),w(t)):(h=new google.maps.Map(document.getElementById("map"),{center:t,zoom:S,mapTypeId:google.maps.MapTypeId.ROADMAP}),v=new google.maps.Marker({position:t,map:h}),D(),C(selectedLocation))}}()):window.alert("No details available for input: '"+t.name+"'")}),p=document.getElementById("locality"),m=new google.maps.places.Autocomplete(p,{types:["(regions)"]}),google.maps.event.addListener(m,"place_changed",function(){}),n.post(i.LIST_ACTIVEMV,{type:1}).then(function(t){t.status&&200!=t.status||(o.countryList=t)}),n.post(i.LIST_ACTIVEMV,{type:2}).then(function(t){t.status&&200!=t.status||(o.cityList=t)}),n.post(i.LIST_ACTIVEMV,{type:3}).then(function(t){t.status&&200!=t.status||(o.businessTypeList=t)}),n.post(i.LIST_ACTIVEMV,{type:5}).then(function(t){t.status&&200!=t.status||(o.stateList=t)}),o.submit=function(){if(o.formData.password==o.formData.confirmPassword){(g=Ladda.create(document.querySelector("#createbtn"))).start();var t=angular.copy(o.formData);t.role="Seller",t.address1=$("#select-ml").val(),t.latitude=parseFloat($("#lat").val()),t.longitude=parseFloat($("#lng").val()),t.isBusinessUser=!0,n.post(i.REGISTER,t).then(function(t){t.status&&200!==t.status?g.stop():(c.set("registeredBuyer",t),o.imageFiles?o.submitImageFile(t.id):(toastr.success("Registration successful, please enter OTP to complete.","Success"),window.location.href="/#otp/verify"))})}else alert("Password & confirm password does not match.")},o.saveFileImage=function(t){o.imageFiles=t},o.submitImageFile=function(t){var e=new FormData;e.append("files",o.imageFiles[0]),e.append("id",t);var a={transformRequest:angular.identity,headers:{"Content-Type":void 0}};n.post(i.UPLOAD_IMAGE,e,a).then(function(t){t.status&&200!=t.status||(o.imageFiles=null,$("#customFile").val("")),g.stop(),r.path("/otp/verify")})},o.onBackClick=function(){a.history.back()},o.onStateClick=function(){o.formData.country=u("filter")(o.countryList,{id:o.formData.state.parent})[0]},o.onCityClick=function(){o.formData.state=u("filter")(o.stateList,{id:o.formData.city.parent})[0],o.onStateClick()};var f,h,v,S=17;function D(){f=new google.maps.Geocoder,google.maps.event.addListener(h,"click",function(t){console.log("map click lat- ",t.latLng.lat()),console.log("map click lng- ",t.latLng.lng()),w({lat:t.latLng.lat(),lng:t.latLng.lng()})})}function w(t){v?v.setPosition(t):v=new google.maps.Marker({position:t,map:h}),$("#lat").val(t.lat),$("#lng").val(t.lng),C(t)}function C(t){f.geocode({latLng:new google.maps.LatLng(t.lat,t.lng)},function(t,e){e==google.maps.GeocoderStatus.OK?t[0]?$("#select-ml").val(t[0].formatted_address):alert("No results"):alert(e)})}setTimeout(function(){!function(){if($("#lat").val()&&$("#lng").val()){var t={lat:parseFloat($("#lat").val()),lng:parseFloat($("#lng").val())};h=new google.maps.Map(document.getElementById("map"),{center:t,zoom:S,mapTypeId:google.maps.MapTypeId.ROADMAP}),v=new google.maps.Marker({position:t,map:h}),D(),C(t)}}()},500)}]),app.controller("profileController",["$scope","$rootScope","$window","$location","$http","authService","DATA_URLS","$filter","appConstant","$anchorScroll",function(e,t,a,o,r,i,n,s,c,u){"use strict";u(),e.userData={},e.editFormData={},e.isLoading=!0,r.post(n.PROFILE_DASHBOARD).then(function(t){e.isLoading=!1,t.status&&200!=t.status||(e.editFormData=t)}),e.isUserAuthenticated=i.authentication.isAuth,e.userData=i.authentication.loginData,e.isUserAuthenticated||(window.location.href="/"),t.$on("authStatusChanged",function(){e.isUserAuthenticated=i.authentication.isAuth,e.isUserAuthenticated&&(e.userData=i.authentication,e.userName=i.authentication.loginData.userName,e.fullName=i.authentication.loginData.userFullName)}),e.logOut=function(){i.logout(),toastr.success("You are successfully logged out.","Success"),setTimeout(function(){window.location.href="/"},300)}}]),app.controller("profileDetailsController",["$scope","$rootScope","$window","$location","$http","authService","DATA_URLS","$filter","appConstant","$anchorScroll","localStorageService",function(o,r,t,e,i,a,n,s,c,u,l){"use strict";function d(){i.post(n.GET_USER).then(function(t){if((!t.status||200==t.status)&&(o.editFormData=t,o.editFormData.image)){var e={isAuth:!0};e.loginData={id:o.userData.id,firstName:o.userData.firstName,lastName:o.userData.lastName,email:o.userData.email,phoneNumber:o.userData.phoneNumber,role:o.userData.role,created:o.userData.created,isVerified:o.userData.isVerified,jwtToken:o.userData.jwtToken,image:o.editFormData.image},l.set("authentication",e),r.$broadcast("authStatusChanged"),o.editFormData.image=n.BASEURL+o.editFormData.image}})}o.userData={},u(),o.editFormData={},o.profileImageFile=null,o.profileImageFileSrc=null,o.isUserAuthenticated=a.authentication.isAuth,o.isUserAuthenticated&&(o.userData=a.authentication.loginData),d(),o.submit=function(){var e=Ladda.create(document.querySelector("#updatebtn"));e.start();var t=angular.copy(o.editFormData);i.post(n.UPDATE_USER,t).then(function(t){e.stop(),t.status&&200!=t.status||toastr.success("Profile updated successfully","Success")})},o.openFileDialog=function(){$("#profilepic").click()},o.saveReqAttach=function(t){o.profileImageFile=t;var e=new FileReader;e.onload=function(t){var e=t.target.result;o.profileImageFileSrc=e;var a=r.$$phase;"$apply"!==a&&"$digest"!==a&&r.$apply()},e.readAsDataURL(o.profileImageFile[0])},o.uploadProfilePhoto=function(){var e=Ladda.create(document.querySelector("#btn"));e.start();var t=new FormData;o.profileImageFile&&0<o.profileImageFile.length&&t.append("files",o.profileImageFile[0]),o.editFormData.id&&t.append("id",o.editFormData.id);var a={transformRequest:angular.identity,headers:{"Content-Type":void 0}};i.post(n.UPLOAD_PROFILE_IMAGE,t,a).then(function(t){e.stop(),t.status&&200!=t.status||(o.editFormData.image=o.profileImageFile[0].name,o.profileImageFile=null,o.profileImageFileSrc=null,$("#profilepic").val(""),toastr.success("Profile image uploaded successfully","Success"),d(),r.$broadcast("onProfileChange")),e.stop()})},o.deleteProfilePhoto=function(){var a=Ladda.create(document.querySelector("#deletebtn"));a.start(),i.post(n.DELETE_PROFILE_IMAGE,o.editFormData.id).then(function(t){if(a.stop(),!t.status||200==t.status){toastr.success("Profile image removed","Success"),o.editFormData.image=null,r.$broadcast("onProfileChange");var e={isAuth:!0};e.loginData={id:o.userData.id,firstName:o.userData.firstName,lastName:o.userData.lastName,email:o.userData.email,phoneNumber:o.userData.phoneNumber,role:o.userData.role,created:o.userData.created,isVerified:o.userData.isVerified,jwtToken:o.userData.jwtToken,image:""},l.set("authentication",e),r.$broadcast("authStatusChanged")}})},o.onBackClick=function(){t.history.back()}}]),app.controller("changePasswordController",["$scope","authService","$rootScope","$window","$location","DATA_URLS","$http","appConstant","$anchorScroll","localStorageService","$filter",function(a,t,e,o,r,i,n,s,c,u,l){"use strict";c(),a.formData={},a.resetPassword=function(){if(a.formData.password==a.formData.confirmPassword){var e=Ladda.create(document.querySelector("#updatebtn"));e.start();var t=angular.copy(a.formData);n.post(i.RESET_PASSWORD,t).then(function(t){e.stop(),t.status&&200!==t.status||(toastr.success("Password changed successfully","Success"),r.path("/profile"))})}else alert("Password & confirm password does not match.")},a.onBackClick=function(){o.history.back()}}]),app.controller("listingDetailsController",["$scope","authService","$rootScope","$window","$location","DATA_URLS","$http","$routeParams","appConstant","$filter","$anchorScroll","localStorageService",function(r,t,a,e,o,i,n,s,c,u,l,d){"use strict";l(),r.editFormData=null,r.recordList=[],r.countryList=[],r.businessTypeList=[],r.cityList=[],r.timezoneList=[],r.serviceImages=[],r.edit=!1,r.isLoading=!1,r.docFilePI=null,r.stateList=[];var p,m,g,f,h,v,S=null;function D(){null!=r.editFormData&&r.editFormData.timezone&&0<r.timezoneList.length&&(r.editFormData.timezone=u("filter")(r.timezoneList,{text:r.editFormData.timezone},!0)[0])}function w(){null!=r.editFormData&&r.editFormData.country&&0<r.countryList.length&&(r.editFormData.country=u("filter")(r.countryList,{id:r.editFormData.country.id},!0)[0])}function C(){null!=r.editFormData&&r.editFormData.city&&0<r.cityList.length&&(r.editFormData.city=u("filter")(r.cityList,{id:r.editFormData.city.id},!0)[0])}function y(){null!=r.editFormData&&r.editFormData.state&&0<r.stateList.length&&(r.editFormData.state=u("filter")(r.stateList,{id:r.editFormData.state.id},!0)[0])}function R(){null!=r.editFormData&&r.editFormData.businessType&&0<r.businessTypeList.length&&(r.editFormData.businessType=u("filter")(r.businessTypeList,{id:r.editFormData.businessType.id},!0)[0])}function I(t){r.isLoading=!0,n.post(i.GET_SERVICE,t).then(function(t){r.isLoading=!1,t.status&&200!=t.status||(r.editFormData=t,r.editFormData.featuredImage&&(r.editFormData.featuredImage=i.BASEURL+r.editFormData.featuredImage),r.editFormData.openOnDays&&(r.editFormData.monday=-1!=r.editFormData.openOnDays.indexOf("Monday"),r.editFormData.tuesday=-1!=r.editFormData.openOnDays.indexOf("Tuesday"),r.editFormData.wednesday=-1!=r.editFormData.openOnDays.indexOf("Wednesday"),r.editFormData.thursday=-1!=r.editFormData.openOnDays.indexOf("Thursday"),r.editFormData.friday=-1!=r.editFormData.openOnDays.indexOf("Friday"),r.editFormData.saturday=-1!=r.editFormData.openOnDays.indexOf("Saturday"),r.editFormData.sunday=-1!=r.editFormData.openOnDays.indexOf("Sunday")),r.editFormData.openOnDays?r.editFormData.hoursopt="1":(r.editFormData.openAllDays&&(r.editFormData.hoursopt="2"),r.editFormData.closeAllDays&&(r.editFormData.hoursopt="3")),angular.forEach(r.editFormData.hours,function(t){t.fromDate=E(t.fromDate),t.toDate=E(t.toDate)}),function(){r.editFormData.address1&&$("#select-ml").val(r.editFormData.address1);r.editFormData.latitude&&$("#lat").val(r.editFormData.latitude);r.editFormData.longitude&&$("#lng").val(r.editFormData.longitude)}(),r.listPI(),R(),C(),w(),D(),y(),function(){if($("#lat").val()&&$("#lng").val()){var t={lat:parseFloat($("#lat").val()),lng:parseFloat($("#lng").val())};A=new google.maps.Map(document.getElementById("map"),{center:t,zoom:F,mapTypeId:google.maps.MapTypeId.ROADMAP}),T=new google.maps.Marker({position:t,map:A}),_(),O(t),N(A,T)}else navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){var e={lat:t.coords.latitude,lng:t.coords.longitude};A=new google.maps.Map(document.getElementById("map"),{zoom:F,center:e,mapTypeId:google.maps.MapTypeId.ROADMAP}),T=new google.maps.Marker({position:e,map:A}),_(),O(e),N(A,T)},function(t){b()},{enableHighAccuracy:!0,timeout:5e3}):b()}())})}function E(t){if(!t)return t;var e=t.split(":"),a=e[0],o=e[1];return new Date(1970,0,1,a,o,0)}null!=s.uid&&(f=document.getElementById("select-ml"),(h=new google.maps.places.Autocomplete(f)).setComponentRestrictions({}),h.setFields(["address_components","geometry","icon","name"]),h.addListener("place_changed",function(){var t=h.getPlace();t.geometry?($("#lat").val(t.geometry.location.lat()),$("#lng").val(t.geometry.location.lng()),function(){if($("#lat").val()&&$("#lng").val()){var t={lat:parseFloat($("#lat").val()),lng:parseFloat($("#lng").val())};A.setCenter(t),U(t)}}()):window.alert("No details available for input: '"+t.name+"'")}),g=document.getElementById("locality"),v=new google.maps.places.Autocomplete(g,{types:["(regions)"]}),google.maps.event.addListener(v,"place_changed",function(){S=v.getPlace();var t=locationDetails(S);if(t){r.editFormData.country=t.country,r.editFormData.state=t.state,r.editFormData.city=t.city,r.editFormData.pincode=t.pincode;var e=a.$$phase;"$apply"!==e&&"$digest"!==e&&a.$apply()}}),n.post(i.LIST_ACTIVEMV,{type:1}).then(function(t){t.status&&200!=t.status||(r.countryList=t,w())}),n.post(i.LIST_ACTIVEMV,{type:2}).then(function(t){t.status&&200!=t.status||(r.cityList=t,C())}),n.post(i.LIST_ACTIVEMV,{type:5}).then(function(t){t.status&&200!=t.status||(r.stateList=t,y())}),n.post(i.LIST_ACTIVEMV,{type:3}).then(function(t){t.status&&200!=t.status||(r.businessTypeList=t,R())}),n.post(i.LIST_ACTIVEMV,{type:4}).then(function(t){t.status&&200!=t.status||(r.timezoneList=t,D())}),r.listingId=parseInt(s.uid),I(s.uid),p=r.listingId,m={serviceId:p},n.post(i.LIST_PRODUCT,m).then(function(t){t.status&&200!=t.status||(r.recordList=t)})),r.listPI=function(){var t={serviceId:r.editFormData.id};n.post(i.LIST_SERVICEIMAGES,t).then(function(t){t.status&&200!=t.status||(r.serviceImages=t,angular.forEach(r.serviceImages,function(t){t.fileName&&(t.fileName=i.BASEURL+t.fileName)}))})},r.submit=function(){var e=Ladda.create(document.querySelector("#updatebtn"));e.start();var t=angular.copy(r.editFormData);t.address1=$("#select-ml").val(),t.latitude=parseFloat($("#lat").val()),t.longitude=parseFloat($("#lng").val()),t.timezone&&(t.timezone=t.timezone.text);var a=[];r.editFormData.monday&&a.push("Monday"),r.editFormData.tuesday&&a.push("Tuesday"),r.editFormData.wednesday&&a.push("Wednesday"),r.editFormData.thursday&&a.push("Thursday"),r.editFormData.friday&&a.push("Friday"),r.editFormData.saturday&&a.push("Saturday"),r.editFormData.sunday&&a.push("Sunday"),t.openOnDays=a.toString(),t.openAllDays=2==r.editFormData.hoursopt,t.closeAllDays=3==r.editFormData.hoursopt;var o=[];angular.forEach(t.hours,function(t){t.fromDate&&t.toDate&&(t.fromDate=t.fromDate.getHours()+":"+t.fromDate.getMinutes()+":"+t.fromDate.getSeconds(),t.toDate=t.toDate.getHours()+":"+t.toDate.getMinutes()+":"+t.toDate.getSeconds(),o.push(angular.copy(t)))}),t.hours=o,n.post(i.UPDATE_SERVICE,t).then(function(t){e.stop(),t.status&&200!=t.status||toastr.success("Service updated successfully","Success")})},r.new=function(){d.set("businessData",r.editFormData),o.path("/product/new/"+r.listingId)},r.onBackClick=function(){e.history.back()},r.editProduct=function(t){d.set("businessData",r.editFormData),o.path("/product/"+t.id)},r.clearPFI=function(){r.docFilePFI=null,$("#fileNamePFI").val("")},r.formDatePI={},r.createNewPI=function(){for(var t=new FormData,e=0;e<r.docFilePI.length;e++)t.append(r.docFilePI[e].name,r.docFilePI[e]),t.append("filename",r.docFilePI[e].name);t.append("productId",r.editFormData.id),t.append("sequenceNumber","0"),t.append("isActive","true"),n.post(i.ADD_PRODUCTIMAGE,t,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(t){t.status&&200!=t.status||(toastr.success("Product image added.","Success"),r.clearPI(),r.listPI())})},r.removePI=function(e){var a=Ladda.create(document.querySelector("#deletePIbtn"));a.start(),n.post(i.REMOVE_SERVICEIMAGE,e).then(function(t){a.stop(),t.status&&200!=t.status||(toastr.success("Image removed","Success"),r.serviceImages.splice(e.index,1),$("#confirmDeleteImage").click())})},r.editPI=function(t,e){r.formDatePI=angular.copy(t),r.formDatePI.index=e},r.updatePI=function(e,t){var a=angular.copy(e);a.isActive=t,n.post(i.EDIT_SERVICEIMAGE,a).then(function(t){t.status&&200!=t.status||(toastr.success("Image updated.","Success"),e.isActive=a.isActive,r.clearPI())})},r.selectedImage=null,r.onImageDelete=function(t,e){r.selectedImage=t,r.selectedImage.index=e},r.docFilePFI=null,r.saveFilesReferencePFI=function(t){r.docFilePFI=t},r.clearPFI=function(){r.docFilePFI=null,$("#fileNamePFI").val(""),$("#fileNamePFI").next("label").html("Choose an image file")},r.savePFI=function(){var e=Ladda.create(document.querySelector("#changeImageBtn"));e.start();var t=new FormData;t.append("files",r.docFilePFI[0]),t.append("id",r.editFormData.id);var a={transformRequest:angular.identity,headers:{"Content-Type":void 0}};n.post(i.UPLOAD_SERVICEFEATUREIMAGE,t,a).then(function(t){t.status&&200!=t.status||(e.stop(),toastr.success("Image added successfully","Success"),r.clearPFI(),I(s.uid))})},r.deleteFeaturedImage=function(){var e=Ladda.create(document.querySelector("#deleteFIbtn"));e.start();var t=angular.copy(r.editFormData.id);n.post(i.DELETEFEATUREDIMAGE_SERVICE,t).then(function(t){e.stop(),t.status&&200!=t.status||(toastr.success("Featured image removed.","Success"),$("#deleteFeaturedImage").click(),I(s.uid))})},r.clearPI=function(){r.docFilePI=null,$("#fileNamePI").val(""),$("#fileNamePI").next("label").html("Choose an image file")},r.saveFilesReferencePI=function(t){r.docFilePI=t},r.savePI=function(){var e=Ladda.create(document.querySelector("#changeImageBtn1"));e.start();var a=new FormData;angular.forEach(r.docFilePI,function(t){a.append("files",t)}),a.append("id",r.editFormData.id);var t={transformRequest:angular.identity,headers:{"Content-Type":void 0}};n.post(i.UPLOAD_SERVICEIMAGE,a,t).then(function(t){t.status&&200!=t.status||(e.stop(),toastr.success("Image added successfully","Success"),r.clearPI(),I(s.uid))})},r.onStateClick=function(){r.editFormData.country=u("filter")(r.countryList,{id:r.editFormData.state.parent})[0]},r.onCityClick=function(){r.editFormData.state=u("filter")(r.stateList,{id:r.editFormData.city.parent})[0],r.onStateClick()},r.onBack=function(){o.path("/mylisting")},r.selectedItem={},r.onDeleteHour=function(t,e){r.selectedItem=t,r.selectedItem.index=e},r.deleteTiming=function(t,e){var a=Ladda.create(document.querySelector("#deleteHoursbtn"));(a.start(),r.selectedItem.id)?n.post(i.DELETE_SERVICE_TIME,r.selectedItem.id).then(function(t){a.stop(),t.status&&200!=t.status||(toastr.success("Deleted successfully","Success"),r.editFormData.hours.splice(r.selectedItem.index,1),$("#confirmDeleteHours").click())}):(a.stop(),toastr.success("Deleted successfully","Success"),r.editFormData.hours.splice(r.selectedItem.index,1),$("#confirmDeleteHours").click())},r.onHourOptChange=function(){0==r.editFormData.hours.length&&r.editFormData.hours.push({})},r.onAddHour=function(){r.editFormData.hours.push({})};var L,A,T,P,F=17;function b(){var t={lat:18.516726,lng:73.856255};$("#lat").val()&&$("#lng").val()?t={lat:parseFloat($("#lat").val()),lng:parseFloat($("#lng").val())}:($("#lat").val(t.lat),$("#lng").val(t.lng)),A=new google.maps.Map(document.getElementById("map"),{center:t,zoom:F,mapTypeId:google.maps.MapTypeId.ROADMAP}),T=new google.maps.Marker({position:t,map:A}),_(),O(t),N(A,T)}function _(){L=new google.maps.Geocoder,google.maps.event.addListener(A,"click",function(t){console.log("map click lat- ",t.latLng.lat()),console.log("map click lng- ",t.latLng.lng()),U({lat:t.latLng.lat(),lng:t.latLng.lng()})})}function U(t){T?T.setPosition(t):T=new google.maps.Marker({position:t,map:A}),$("#lat").val(t.lat),$("#lng").val(t.lng),O(t)}function O(t){console.log("getAddress latLng -",t),L.geocode({latLng:new google.maps.LatLng(t.lat,t.lng)},function(t,e){e==google.maps.GeocoderStatus.OK?t[0]?$("#select-ml").val(t[0].formatted_address):alert("No results"):alert(e)})}function N(t,e){var a=document.createElement("div"),o=document.createElement("button");o.type="button",o.style.backgroundColor="#fff",o.style.border="none",o.style.outline="none",o.style.width="40px",o.style.height="40px",o.style.borderRadius="2px",o.style.boxShadow="0 1px 4px rgba(0,0,0,0.3)",o.style.cursor="pointer",o.style.marginRight="10px",o.style.padding="0",o.title="Your Location",a.appendChild(o);var r=document.createElement("div");r.style.margin="11px",r.style.width="18px",r.style.height="18px",r.style.backgroundImage="url(https://maps.gstatic.com/tactile/mylocation/mylocation-sprite-2x.png)",r.style.backgroundSize="180px 18px",r.style.backgroundPosition="0 0",r.style.backgroundRepeat="no-repeat",o.appendChild(r),google.maps.event.addListener(t,"center_changed",function(){r.style["background-position"]="0 0"}),o.addEventListener("click",function(){var t="0";P=setInterval(function(){t="-18"===t?"0":"-18",r.style["background-position"]=t+"px 0"},500),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){var e={lat:t.coords.latitude,lng:t.coords.longitude};A.setCenter(e),P&&clearInterval(P),U(e),secondChild.style["background-position"]="-144px 0"},function(t){alert("We cannot locate your current location. Please change your mobile phone location permission settings."),P&&clearInterval(P)},{enableHighAccuracy:!0,timeout:5e3}):(P&&clearInterval(P),secondChild.style["background-position"]="0 0")}),a.index=1,t.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(a)}}]),app.controller("listingListController",["$scope","authService","$rootScope","$window","$location","DATA_URLS","$http","$routeParams","$anchorScroll",function(e,t,a,o,r,i,n,s,c){"use strict";c(),e.recordList=[],e.isLoading=!1,function(){e.isLoading=!0;n.post(i.LIST_SERVICE,{}).then(function(t){e.isLoading=!1,t.status&&200!=t.status||(e.recordList=t,angular.forEach(e.recordList,function(t){t.featuredImage&&(t.featuredImage=i.BASEURL+t.featuredImage)}))})}(),e.onEdit=function(t){r.path("listing/"+t.id)},e.onBackClick=function(){o.history.back()},e.new=function(){r.path("/listing/new")}}]),app.controller("newListingController",["$scope","$rootScope","$window","$location","$http","authService","DATA_URLS","$filter","appConstant","$anchorScroll",function(o,t,e,r,i,a,n,s,c,u){"use strict";u(),o.formData={},o.formData.hours=[];var l,d,p,m,g=o.imageFiles=null;o.countryList=[],o.stateList=[],o.cityList=[],o.businessTypeList=[],o.timezoneList=[],l=document.getElementById("select-ml"),(d=new google.maps.places.Autocomplete(l)).setComponentRestrictions({}),d.setFields(["address_components","geometry","icon","name"]),d.addListener("place_changed",function(){var t=d.getPlace();t.geometry?($("#lat").val(t.geometry.location.lat()),$("#lng").val(t.geometry.location.lng()),function(){if($("#lat").val()&&$("#lng").val()){var t={lat:parseFloat($("#lat").val()),lng:parseFloat($("#lng").val())};h?(h.setCenter(t),w(t)):(h=new google.maps.Map(document.getElementById("map"),{center:t,zoom:S,mapTypeId:google.maps.MapTypeId.ROADMAP}),v=new google.maps.Marker({position:t,map:h}),D(),C(selectedLocation))}}()):window.alert("No details available for input: '"+t.name+"'")}),p=document.getElementById("locality"),m=new google.maps.places.Autocomplete(p,{types:["(regions)"]}),google.maps.event.addListener(m,"place_changed",function(){}),i.post(n.LIST_ACTIVEMV,{type:1}).then(function(t){t.status&&200!=t.status||(o.countryList=t)}),i.post(n.LIST_ACTIVEMV,{type:2}).then(function(t){t.status&&200!=t.status||(o.cityList=t)}),i.post(n.LIST_ACTIVEMV,{type:5}).then(function(t){t.status&&200!=t.status||(o.stateList=t)}),i.post(n.LIST_ACTIVEMV,{type:3}).then(function(t){t.status&&200!=t.status||(o.businessTypeList=t)}),i.post(n.LIST_ACTIVEMV,{type:4}).then(function(t){t.status&&200!=t.status||(o.timezoneList=t)}),o.onStateClick=function(){o.formData.country=s("filter")(o.countryList,{id:o.formData.state.parent})[0]},o.onCityClick=function(){o.formData.state=s("filter")(o.stateList,{id:o.formData.city.parent})[0],o.onStateClick()},o.submit=function(){(g=Ladda.create(document.querySelector("#createbtn"))).start();var t=angular.copy(o.formData);t.address1=$("#select-ml").val(),t.latitude=parseFloat($("#lat").val()),t.longitude=parseFloat($("#lng").val()),t.timezone&&(t.timezone=t.timezone.text);var e=[];o.formData.monday&&e.push("Monday"),o.formData.tuesday&&e.push("Tuesday"),o.formData.wednesday&&e.push("Wednesday"),o.formData.thursday&&e.push("Thursday"),o.formData.friday&&e.push("Friday"),o.formData.saturday&&e.push("Saturday"),o.formData.sunday&&e.push("Sunday"),t.openOnDays=e.toString(),t.openAllDays=2==o.formData.hoursopt,t.closeAllDays=3==o.formData.hoursopt;var a=[];angular.forEach(t.hours,function(t){t.fromDate&&t.toDate&&(t.fromDate=t.fromDate.getHours()+":"+t.fromDate.getMinutes()+":"+t.fromDate.getSeconds(),t.toDate=t.toDate.getHours()+":"+t.toDate.getMinutes()+":"+t.toDate.getSeconds(),a.push(angular.copy(t)))}),t.hours=a,console.log("fdata - ",t),i.post(n.NEW_SERVICE,t).then(function(t){t.status&&200!==t.status?g.stop():o.imageFiles?o.submitImageFile(t.id):(toastr.success("New Listing added successfully","Success"),r.path("/mylisting"))})},o.saveFileImage=function(t){o.imageFiles=t},o.submitImageFile=function(t){var e=new FormData;e.append("files",o.imageFiles[0]),e.append("id",t);var a={transformRequest:angular.identity,headers:{"Content-Type":void 0}};i.post(n.UPLOAD_SERVICEFEATUREIMAGE,e,a).then(function(t){t.status&&200!=t.status||(o.imageFiles=null,$("#customFile").val("")),g.stop(),toastr.success("New Listing added successfully","Success"),r.path("/mylisting")})},o.onBack=function(){r.path("/mylisting")},o.onHourOptChange=function(){0==o.formData.hours.length&&o.formData.hours.push({})},o.onAddHour=function(){o.formData.hours.push({})},o.onDeleteHour=function(t){o.formData.hours.splice(t,1)};var f,h,v,S=17;function D(){f=new google.maps.Geocoder,google.maps.event.addListener(h,"click",function(t){console.log("map click lat- ",t.latLng.lat()),console.log("map click lng- ",t.latLng.lng()),w({lat:t.latLng.lat(),lng:t.latLng.lng()})})}function w(t){v?v.setPosition(t):v=new google.maps.Marker({position:t,map:h}),$("#lat").val(t.lat),$("#lng").val(t.lng),C(t)}function C(t){f.geocode({latLng:new google.maps.LatLng(t.lat,t.lng)},function(t,e){e==google.maps.GeocoderStatus.OK?t[0]?$("#select-ml").val(t[0].formatted_address):alert("No results"):alert(e)})}setTimeout(function(){!function(){if($("#lat").val()&&$("#lng").val()){var t={lat:parseFloat($("#lat").val()),lng:parseFloat($("#lng").val())};h=new google.maps.Map(document.getElementById("map"),{center:t,zoom:S,mapTypeId:google.maps.MapTypeId.ROADMAP}),v=new google.maps.Marker({position:t,map:h}),D(),C(t)}}()},500)}]),app.controller("newProductController",["$scope","$rootScope","$window","$location","$http","authService","DATA_URLS","$filter","appConstant","$routeParams","$anchorScroll","localStorageService",function(o,t,e,r,i,a,n,s,c,u,l,d){"use strict";l(),o.formData={},o.formData.isAvailable=!0;var p=o.imageFiles=null;o.categoryList=[],o.businessData={},null!=u.uid&&(o.listingId=parseInt(u.uid),o.businessData=d.get("businessData")),i.post(n.LIST_CATEGORY,{}).then(function(t){t.status&&200!=t.status||(o.categoryList=t)}),o.submit=function(){(p=Ladda.create(document.querySelector("#createbtn"))).start();var t=angular.copy(o.formData);t.serviceId=o.listingId,i.post(n.NEW_PRODUCT,t).then(function(t){t.status&&200!==t.status?p.stop():o.imageFiles?o.submitImageFile(t.id):(toastr.success("New product added successfully","Success"),d.remove("businessData"),r.path("/listing/"+o.listingId))})},o.saveFileImage=function(t){o.imageFiles=t},o.submitImageFile=function(t){var e=new FormData;e.append("files",o.imageFiles[0]),e.append("id",t);var a={transformRequest:angular.identity,headers:{"Content-Type":void 0}};i.post(n.UPLOAD_PRODUCTFEATUREIMAGE,e,a).then(function(t){t.status&&200!=t.status||(o.imageFiles=null,$("#customFile").val("")),p.stop(),toastr.success("New product added successfully","Success"),d.remove("businessData"),r.path("/listing/"+o.listingId)})},o.onBackClick=function(){e.history.back()}}]),app.controller("productDetailsController",["$scope","authService","$rootScope","$window","$location","DATA_URLS","$http","$routeParams","appConstant","$filter","$anchorScroll","localStorageService",function(o,t,e,a,r,i,n,s,c,u,l,d){"use strict";function p(){null!=o.editFormData&&0<o.categories.length&&(o.editFormData.category=u("filter")(o.categories,{id:o.editFormData.category.id})[0])}function m(t){o.isLoading=!0,n.post(i.GET_PRODUCT,t).then(function(t){o.isLoading=!1,t.status&&200!=t.status||(o.editFormData=t,o.editFormData.imageName&&(o.editFormData.imageName=i.BASEURL+o.editFormData.imageName),o.listPI(),p())})}l(),o.editFormData=null,o.recordList=[],o.categories=[],o.productImages=[],o.edit=!1,o.isLoading=!1,o.docFilePI=null,o.businessData={},null!=s.uid&&(n.post(i.LIST_CATEGORY,{}).then(function(t){t.status&&200!=t.status||(o.categories=t,p())}),m(s.uid),o.businessData=d.get("businessData")),o.listPI=function(){var t={productId:o.editFormData.id};n.post(i.LIST_PRODUCTIMAGES,t).then(function(t){t.status&&200!=t.status||(o.productImages=t,angular.forEach(o.productImages,function(t){t.fileName&&(t.fileName=i.BASEURL+t.fileName)}))})},o.submit=function(){var e=Ladda.create(document.querySelector("#updatebtn"));e.start();var t=angular.copy(o.editFormData);n.post(i.UPDATE_PRODUCT,t).then(function(t){e.stop(),t.status&&200!=t.status||(toastr.success("Product updated successfully","Success"),d.remove("businessData"),r.path("/listing/"+o.editFormData.serviceId))})},o.new=function(){r.path("/product/new")},o.onBackClick=function(){a.history.back()},o.onEdit=function(){o.edit=!0},o.onCloseEdit=function(){o.edit=!1},o.clearPFI=function(){o.docFilePFI=null,$("#fileNamePFI").val("")},o.formDatePI={},o.createNewPI=function(){for(var t=new FormData,e=0;e<o.docFilePI.length;e++)t.append(o.docFilePI[e].name,o.docFilePI[e]),t.append("filename",o.docFilePI[e].name);t.append("productId",o.editFormData.id),t.append("sequenceNumber","0"),t.append("isActive","true"),n.post(i.ADD_PRODUCTIMAGE,t,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(t){t.status&&200!=t.status||(toastr.success("Product image added.","Success"),o.clearPI(),o.listPI())})},o.removePI=function(e){var a=Ladda.create(document.querySelector("#deletePIbtn"));a.start(),n.post(i.REMOVE_PRODUCTIMAGE,e).then(function(t){a.stop(),t.status&&200!=t.status||(toastr.success("Product image removed","Success"),o.productImages.splice(e.index,1),$("#confirmDeleteImage").click())})},o.editPI=function(t,e){o.formDatePI=angular.copy(t),o.formDatePI.index=e},o.updatePI=function(e,t){var a=angular.copy(e);a.isActive=t,n.post(i.EDIT_PRODUCTIMAGE,a).then(function(t){t.status&&200!=t.status||(toastr.success("Product image updated.","Success"),e.isActive=a.isActive,o.clearPI())})},o.selectedImage=null,o.onImageDelete=function(t,e){o.selectedImage=t,o.selectedImage.index=e},o.docFilePFI=null,o.saveFilesReferencePFI=function(t){o.docFilePFI=t},o.clearPFI=function(){o.docFilePFI=null,$("#fileNamePFI").val(""),$("#fileNamePFI").next("label").html("Choose an image file")},o.savePFI=function(){var e=Ladda.create(document.querySelector("#changeImageBtn"));e.start();var t=new FormData;t.append("files",o.docFilePFI[0]),t.append("id",o.editFormData.id);var a={transformRequest:angular.identity,headers:{"Content-Type":void 0}};n.post(i.UPLOAD_PRODUCTFEATUREIMAGE,t,a).then(function(t){t.status&&200!=t.status||(e.stop(),toastr.success("Image added successfully","Success"),o.clearPFI(),m(s.uid))})},o.deleteFeaturedImage=function(){var e=Ladda.create(document.querySelector("#deleteFIbtn"));e.start();var t=angular.copy(o.editFormData.id);n.post(i.DELETEFEATUREDIMAGE_PRODUCT,t).then(function(t){e.stop(),t.status&&200!=t.status||(toastr.success("Featured image removed.","Success"),$("#deleteFeaturedImage").click(),m(s.uid))})},o.clearPI=function(){o.docFilePI=null,$("#fileNamePI").val(""),$("#fileNamePI").next("label").html("Choose an image file")},o.saveFilesReferencePI=function(t){o.docFilePI=t},o.savePI=function(){var e=Ladda.create(document.querySelector("#changeImageBtn1"));e.start();var a=new FormData;angular.forEach(o.docFilePI,function(t){a.append("files",t)}),a.append("id",o.editFormData.id);var t={transformRequest:angular.identity,headers:{"Content-Type":void 0}};n.post(i.UPLOAD_PRODUCTIMAGE,a,t).then(function(t){t.status&&200!=t.status||(e.stop(),toastr.success("Image added successfully","Success"),o.clearPI(),m(s.uid))})}}]),app.controller("enquiryListController",["$scope","authService","$rootScope","$window","$location","DATA_URLS","$http","$routeParams","$anchorScroll",function(e,t,a,o,r,i,n,s,c){"use strict";c(),e.recordList=[],e.isLoading=!1,e.isLoading=!0,n.post(i.LIST_PRODUCT_ENQUIRY).then(function(t){e.isLoading=!1,t.status&&200!=t.status||(e.recordList=t,angular.forEach(e.recordList,function(t){t.dateString=timeAgo(Date.parse(t.createdDate))}))})}]),app.controller("thankyouController",["$scope","authService","$rootScope","$window","$location","DATA_URLS","$http","appConstant","localStorageService",function(t,e,a,o,r,i,n,s,c){}]),app.controller("searchServiceListingController",["$scope","authService","$rootScope","$window","$location","DATA_URLS","$http","appConstant","$anchorScroll","localStorageService","$filter",function(o,t,e,a,r,i,n,s,c,u,l){"use strict";c(),o.searchFormData={},o.recordList=[],o.srchCount=0,o.filters=[],m(null),o.sortByList=s.SortBy,o.searchFormData.sortBy=o.sortByList[1],o.categoryList=[],o.countryList=[],o.businessTypeList=[],o.pageSize=25,o.pageNumber=1;var d,p=u.get(s.LocalStorageKeys.SearchFormData);function m(t){var e={types:["(regions)"]};t&&(e.componentRestrictions={country:t});var a=document.getElementById("location");d=new google.maps.places.Autocomplete(a,e),google.maps.event.addListener(d,"place_changed",function(){})}function g(){null!=o.searchFormData&&o.searchFormData.country&&0<o.countryList.length&&(o.searchFormData.country=l("filter")(o.countryList,{id:o.searchFormData.country.id},!0)[0])}function f(){null!=o.searchFormData&&o.searchFormData.businessType&&0<o.businessTypeList.length&&(o.searchFormData.businessType=l("filter")(o.businessTypeList,{id:o.searchFormData.businessType.id},!0)[0])}function h(a){var t=function(){var t={};o.searchFormData.sortBy&&(t.sortBy=o.searchFormData.sortBy.id);return t.pageSize=o.pageSize,t.pageNumber=o.pageNumber,t.businessType=o.searchFormData.businessType,t.country=o.searchFormData.country,t.location=o.searchFormData.location,t.businessName=o.searchFormData.businessName,t}();t.includeFilters=a,t.location=$("#location").val(),t.businessType&&(t.businessType=t.businessType.id),t.country&&(t.country=t.country.id),n.post(i.SEARCH_SERVICE,t).then(function(t){if(!t.status||200==t.status){var e=t.listing;angular.forEach(e,function(t,e){o.recordList.push(t)}),0==e.length&&1==o.pageNumber?o.nomoreresult="No post found matching your search":0==e.length&&1<o.pageNumber?o.nomoreresult="It looks like there are no more search results matching":1==o.pageNumber&&o.pageSize>e.length?o.nomoreresult="It looks like there are no more search results matching":o.nomoreresult=null,o.srchCount=t.total,a&&(o.filters=t.filters),angular.forEach(o.recordList,function(t){t.featuredImage&&(t.featuredImage=i.BASEURL+t.featuredImage),t.description&&51<t.description.length&&(t.description=t.description.limit(45)),angular.forEach(t.images,function(t){t.fileName&&(t.fileName=t.fileName.replace(/\\/g,"/"),t.fileName=i.BASEURL+t.fileName)})})}})}p&&(o.searchFormData=p,o.searchFormData.sortBy=o.sortByList[1],o.searchFormData.location&&$("#location").val(o.searchFormData.location),g(),f()),h(!0),n.post(i.LIST_CATEGORY,{}).then(function(t){!t.status||t.status}),n.post(i.LIST_ACTIVEMV,{type:1}).then(function(t){t.status&&200!=t.status||(o.countryList=t,g())}),n.post(i.LIST_ACTIVEMV,{type:3}).then(function(t){t.status&&200!=t.status||(o.businessTypeList=t,f())}),o.geolocate=function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){var e={lat:t.coords.latitude,lng:t.coords.longitude},a=new google.maps.Circle({center:e,radius:t.coords.accuracy});d.setBounds(a.getBounds())})},o.onCountryChange=function(){$("#location").val(""),m(o.searchFormData.country.shortCode)},o.onEdit=function(t){u.set("serviceId",t.id),window.location.href=window.location.origin+"/service/details"},o.onSearchClick=function(){u.get(s.LocalStorageKeys.SearchFormData)&&u.remove(s.LocalStorageKeys.SearchFormData),o.recordList=[],o.pageNumber=1,h(!(o.nomoreresult=null))},o.onClearClick=function(){u.get(s.LocalStorageKeys.SearchFormData)&&u.remove(s.LocalStorageKeys.SearchFormData),o.searchFormData={},o.searchFormData.sortBy=o.sortByList[1],$("#location").val(""),o.nomoreresult=null,o.recordList=[],o.pageNumber=1,h(!0)},o.onViewMoreResult=function(){o.pageNumber++,h(!0)},o.onPhoneNumber=function(t){var e=document.createElement("a");e.setAttribute("href","tel:"+t.phoneNumber),e.click()},o.onWebsite=function(t){var e=document.createElement("a");e.href=(-1!=t.website.indexOf("http://")||-1!=t.website.indexOf("https://")?"":"http://")+t.website,e.setAttribute("target","_blank"),e.click()},o.onEmail=function(t){var e=document.createElement("a");e.setAttribute("href","mailto:"+t.email),e.click()},o.onSortChange=function(){o.pageNumber=1,o.recordList=[],h(!(o.srchCount=0))}}]),app.controller("browserServiceListingController",["$scope","authService","$rootScope","$window","$location","DATA_URLS","$http","appConstant",function(t,e,a,o,r,i,n,s){"use strict";t.selectedBusinessType=$("#forSrvListing").val()}]),app.controller("serviceDetailsController",["$scope","authService","$rootScope","$window","$location","DATA_URLS","$http","appConstant","localStorageService",function(s,t,e,a,o,r,i,n,c){"use strict";var u;function l(){$("#slid_photo").show(),$("#slid_photo").owlCarousel({loop:!0,margin:10,nav:!0,dots:!1,responsive:{0:{items:3},600:{items:4},1e3:{items:6}}})}function d(t){i.post(r.STAR_COUNT_SERVICE_REVIEW,t).then(function(t){var e,a,o,r,i,n;t.status&&200!=t.status||(s.serviceReviewCount=t,0<s.serviceReviewCount.totalCount&&(e=s.serviceReviewCount.oneStar,a=s.serviceReviewCount.twoStar,o=s.serviceReviewCount.threeStar,r=s.serviceReviewCount.fourStar,i=s.serviceReviewCount.fiveStar,n=s.serviceReviewCount.totalCount,s.reviewAveragecount=Math.round((5*i+4*r+3*o+2*a+1*e)/n)),s.serviceReviewCount.oneStarPer=0==s.serviceReviewCount.oneStar?0:s.serviceReviewCount.oneStar/s.serviceReviewCount.totalCount*100,s.serviceReviewCount.twoStarPer=0==s.serviceReviewCount.twoStar?0:s.serviceReviewCount.twoStar/s.serviceReviewCount.totalCount*100,s.serviceReviewCount.threeStarPer=0==s.serviceReviewCount.threeStar?0:s.serviceReviewCount.threeStar/s.serviceReviewCount.totalCount*100,s.serviceReviewCount.fourStarPer=0==s.serviceReviewCount.fourStar?0:s.serviceReviewCount.fourStar/s.serviceReviewCount.totalCount*100,s.serviceReviewCount.fiveStarPer=0==s.serviceReviewCount.fiveStar?0:s.serviceReviewCount.fiveStar/s.serviceReviewCount.totalCount*100)})}s.serviceId=null,s.serviceId=parseInt(c.get("serviceId")),s.editFormData={},s.serviceImages=[],s.serviceReviewList=[],s.formData={},s.userDate={},s.isUserAuthenticated=t.authentication.isAuth,s.totalCount=0,s.serviceReviewCount={},s.reviewAveragecount=0,s.isRatingZero=!1,s.reviewWidthPercentage={},s.selectedService=null,u=s.serviceId,i.post(r.VIEW_AND_GET_SERVICE,u).then(function(t){t.status&&200!=t.status||(s.editFormData=t,s.editFormData.featuredImage&&(s.editFormData.featuredImage=r.BASEURL+s.editFormData.featuredImage),s.editFormData.dateString=timeAgo(Date.parse(s.editFormData.createdDate)),s.editFormData.address1&&$("#select-ml").val(s.editFormData.address1),s.editFormData.latitude&&$("#lat").val(s.editFormData.latitude),s.editFormData.longitude&&$("#lng").val(s.editFormData.longitude),s.listPI(),s.listServiceReviews(),function(){if($("#lat").val()&&$("#lng").val()){var t={lat:parseFloat($("#lat").val()),lng:parseFloat($("#lng").val())};p=new google.maps.Map(document.getElementById("map"),{center:t,zoom:m,mapTypeId:google.maps.MapTypeId.ROADMAP}),new google.maps.Marker({position:t,map:p})}}())}),d(s.serviceId),s.isUserAuthenticated&&(s.userData=t.authentication.loginData,s.formData.phoneNumber=s.userData.phoneNumber,s.formData.name=s.userData.firstName+s.userData.lastName,s.formData.email=s.userData.email),e.$on("authStatusChanged",function(){s.isUserAuthenticated=t.authentication.isAuth,s.isUserAuthenticated&&(s.userData=t.authentication.loginData)}),s.listPI=function(){var t={serviceId:s.editFormData.id};i.post(r.FRONT_LIST_ACTIVESERVICEIMAGES,t).then(function(t){t.status&&200!=t.status||(s.serviceImages=t,angular.forEach(s.serviceImages,function(t){t.fileName&&(t.fileName=t.fileName.replace(/\\/g,"/"),t.fileName=r.BASEURL+t.fileName)}),1<s.serviceImages.length&&setTimeout(l,250))})},s.listServiceReviews=function(){var t={serviceId:s.editFormData.id};i.post(r.LIST_SERVICE_REVIEW,t).then(function(t){t.status&&200!=t.status||(s.serviceReviewList=t.list,s.totalCount=t.totalCount)})},s.submit=function(){if(0!=s.formData.review&&null!=s.formData.review){s.selectRating=!0;var e=Ladda.create(document.querySelector("#enqrybtn"));e.start();var t=angular.copy(s.formData);t.serviceId=s.editFormData.id,i.post(r.ADD_SERVICE_REVIEW,t).then(function(t){e.stop(),t.status&&200!=t.status||(toastr.success("Review submitted successfully.","Success"),$("#editBox").click(),s.formData={},s.serviceReviewList.unshift(t),s.totalCount+=1,d(s.serviceId))})}else s.isRatingZero=!0},s.viewAllReviews=function(){window.location.href="/#/business/reviews/"+s.editFormData.businessName+"/"+s.editFormData.id},s.onRatingClick=function(t){s.formData.review=t},s.onSubmitClick=function(){s.isUserAuthenticated&&s.submit()},s.onAddBookMark=function(){i.post(r.ADD_BOOK_MARK,s.editFormData.id).then(function(t){t.status&&200!=t.status||(toastr.success("Book mark added successfully.","Success"),s.editFormData.isBookMarked=!0)})},s.onAddBookMarkClick=function(){s.isUserAuthenticated?s.onAddBookMark():$("#hdforbookmark").click()},s.onPhoneNumber=function(){if(s.editFormData.phoneNumber){var t=document.createElement("a");t.setAttribute("href","tel:"+s.editFormData.phoneNumber),t.click()}},s.onWebsite=function(){if(s.editFormData.website){var t=document.createElement("a");t.href=(-1!=s.editFormData.website.indexOf("http://")||-1!=s.editFormData.website.indexOf("https://")?"":"http://")+s.editFormData.website,t.setAttribute("target","_blank"),t.click()}},s.onEmail=function(){if(s.editFormData.email){var t=document.createElement("a");t.setAttribute("href","mailto:"+s.editFormData.email),t.click()}};var p,m=17}]),app.controller("serviceListingController",["$scope","authService","$rootScope","$window","$location","DATA_URLS","$http","appConstant","$anchorScroll","localStorageService",function(e,t,a,o,r,i,n,s,c,u){"use strict";c(),e.recordList=[],e.categoryList=[],n.post(i.FRONT_LIST_SERVICE,{}).then(function(t){t.status&&200!=t.status||(e.recordList=t,angular.forEach(e.recordList,function(t){t.featuredImage&&(t.featuredImage=i.BASEURL+t.featuredImage),t.description&&51<t.description.length&&(t.description=t.description.limit(45))}))}),n.post(i.LIST_CATEGORY,{}).then(function(t){t.status&&200!=t.status||(e.categoryList=t)}),e.onEdit=function(t){u.set("serviceId",t.id),window.location.href=window.location.origin+"/service/details"}}]),app.controller("serviceReviewsController",["$scope","authService","$rootScope","$window","$location","DATA_URLS","$http","$routeParams","appConstant","$filter","$anchorScroll","localStorageService",function(s,t,e,a,o,r,i,n,c,u,l,d){"use strict";var p;function m(t){var e={serviceId:t,pageNumber:s.pageNumber,pageSize:s.pageSize};i.post(r.LIST_ALL_SERVICE_REVIEW,e).then(function(t){t.status&&200!=t.status||(s.recordList=t.list,s.totalRecords=t.totalCount)})}function g(){m(s.serviceId)}s.recordList=[],s.editFormData={},s.pageSize=5,s.pageNumber=1,s.totalRecords=[],s.serviceReviewCount={},$("html, body").animate({scrollTop:$(".reviewdetails").offset().top-100},500),null!=n.uid&&(s.serviceId=parseInt(n.uid),m(s.serviceId),p=s.serviceId,i.post(r.GET_SERVICE_FOR_REVIEW,p).then(function(t){t.status&&200!=t.status||(s.editFormData=t,s.editFormData.featuredImage&&(s.editFormData.featuredImage=r.BASEURL+s.editFormData.featuredImage))}),s.serviceId,i.post(r.STAR_COUNT_SERVICE_REVIEW,s.serviceId).then(function(t){var e,a,o,r,i,n;t.status&&200!=t.status||(s.serviceReviewCount=t,0<s.serviceReviewCount.totalCount&&(e=s.serviceReviewCount.oneStar,a=s.serviceReviewCount.twoStar,o=s.serviceReviewCount.threeStar,r=s.serviceReviewCount.fourStar,i=s.serviceReviewCount.fiveStar,n=s.serviceReviewCount.totalCount,s.reviewAveragecount=Math.round((5*i+4*r+3*o+2*a+1*e)/n)),s.serviceReviewCount.oneStarPer=0==s.serviceReviewCount.oneStar?0:s.serviceReviewCount.oneStar/s.serviceReviewCount.totalCount*100,s.serviceReviewCount.twoStarPer=0==s.serviceReviewCount.twoStar?0:s.serviceReviewCount.twoStar/s.serviceReviewCount.totalCount*100,s.serviceReviewCount.threeStarPer=0==s.serviceReviewCount.threeStar?0:s.serviceReviewCount.threeStar/s.serviceReviewCount.totalCount*100,s.serviceReviewCount.fourStarPer=0==s.serviceReviewCount.fourStar?0:s.serviceReviewCount.fourStar/s.serviceReviewCount.totalCount*100,s.serviceReviewCount.fiveStarPer=0==s.serviceReviewCount.fiveStar?0:s.serviceReviewCount.fiveStar/s.serviceReviewCount.totalCount*100)})),s.onDetailsClick=function(){d.set("serviceId",s.serviceId),window.location.href=window.location.origin+"/service/details"},s.range=function(){var t,e,a=c.PaginationRangeSize,o=[];if(s.pageCount()>a){var r=(e=(t=s.pageNumber<=0?0:s.pageNumber-1)+(a-1))-s.pageCount();0<r&&(t-=r,e-=r)}else t=0,e=s.pageCount();for(var i=t;i<=e;i++)o.push(i);return o},s.prevPage=function(){1<s.pageNumber&&(s.pageNumber--,l(),g())},s.DisablePrevPage=function(){return 0===s.pageNumber?"disabled":""},s.pageCount=function(){return Math.ceil(s.totalRecords/s.pageSize)-1},s.nextPage=function(){s.pageNumber<s.pageCount()&&(s.pageNumber++,l(),g())},s.DisableNextPage=function(){return s.pageNumber===s.pageCount()?"disabled":""},s.setPage=function(t){s.pageNumber=t,l(),g()}}]),app.controller("upcomingEventsController",["$scope","authService","$rootScope","$window","$location","DATA_URLS","$http","appConstant",function(e,t,a,o,r,i,n,s){"use strict";e.homePageEventList=[],e.selecteItem={},n.post(i.LIST_ACTIVE_EVENT).then(function(t){t.status&&200!=t.status||(e.homePageEventList=t,angular.forEach(e.homePageEventList,function(t){t.listingBanner&&(t.listingBanner=t.listingBanner.replace(/\\/g,"/"),t.listingBanner=i.BASEURL+t.listingBanner),t.homePageBanner&&(t.homePageBanner=i.BASEURL+t.homePageBanner),t.shortDescription&&150<t.shortDescription.length&&(t.shortDescription=t.shortDescription.limit(147))}))}),e.onEventClick=function(t){e.selecteItem=angular.copy(t),setTimeout(function(){$("#upcoming_modal_1").modal()},300)}}]),app.controller("bookmarkListController",["$scope","authService","$rootScope","$window","$location","DATA_URLS","$http","$routeParams","$anchorScroll","localStorageService",function(a,t,e,o,r,i,n,s,c,u){"use strict";c(),a.recordList=[],a.isLoading=!1,a.selectedItem={},a.selectedItem.index={},a.isLoading=!0,n.post(i.LIST_BOOK_MARK).then(function(t){a.isLoading=!1,t.status&&200!=t.status||(a.recordList=t,angular.forEach(a.recordList,function(t){t.dateString=timeAgo(Date.parse(t.createdDate))}))}),a.onServiceClick=function(t){u.set("serviceId",t.id),window.location.href=window.location.origin+"/service/details"},a.onDeleteClick=function(t,e){a.selectedItem=t,a.selectedItem.index=e},a.delete=function(){n.post(i.DELETE_BOOK_MARK,a.selectedItem.serviceId).then(function(t){t.status&&200!=t.status||(toastr.success("BookMark deleted successfully.","Success"),a.recordList.splice(a.selectedItem.index,1),$("#closeBookmarkpopup").click()),$("#confirmDelete").click()})}}]),app.controller("productreviewsController",["$scope","authService","$rootScope","$window","$location","DATA_URLS","$http","$routeParams","appConstant","$filter","$anchorScroll","localStorageService",function(s,t,e,a,o,r,i,n,c,u,l,d){"use strict";var p,m;function g(t){var e={productId:t,pageNumber:s.pageNumber,pageSize:s.pageSize};i.post(r.LIST_ALL_PRODUCT_REVIEW,e).then(function(t){t.status&&200!=t.status||(s.recordList=t.list,s.totalRecords=t.totalCount)})}function f(){g(s.productId)}s.recordList=[],s.editFormData={},s.pageSize=5,s.pageNumber=1,s.totalRecords=0,s.productReviewCount={},null!=n.uid&&(s.productId=parseInt(n.uid),m=s.productId,i.post(r.GET_PRODUCT_FOR_REVIEW,m).then(function(t){t.status&&200!=t.status||(s.editFormData=t,s.editFormData.imageName&&(s.editFormData.imageName=r.BASEURL+s.editFormData.imageName))}),g(s.productId),p=s.productId,i.post(r.STAR_COUNT_PRODUCT_REVIEW,p).then(function(t){var e,a,o,r,i,n;t.status&&200!=t.status||(s.productReviewCount=t,0<s.productReviewCount.totalCount&&(e=s.productReviewCount.oneStar,a=s.productReviewCount.twoStar,o=s.productReviewCount.threeStar,r=s.productReviewCount.fourStar,i=s.productReviewCount.fiveStar,n=s.productReviewCount.totalCount,s.reviewAveragecount=Math.round((5*i+4*r+3*o+2*a+1*e)/n)),s.productReviewCount.oneStarPer=0==s.productReviewCount.oneStar?0:s.productReviewCount.oneStar/s.productReviewCount.totalCount*100,s.productReviewCount.twoStarPer=0==s.productReviewCount.twoStar?0:s.productReviewCount.twoStar/s.productReviewCount.totalCount*100,s.productReviewCount.threeStarPer=0==s.productReviewCount.threeStar?0:s.productReviewCount.threeStar/s.productReviewCount.totalCount*100,s.productReviewCount.fourStarPer=0==s.productReviewCount.fourStar?0:s.productReviewCount.fourStar/s.productReviewCount.totalCount*100,s.productReviewCount.fiveStarPer=0==s.productReviewCount.fiveStar?0:s.productReviewCount.fiveStar/s.productReviewCount.totalCount*100)})),s.onProductClick=function(){window.location.href="/#/productdetail/"+s.editFormData.name+"/"+s.editFormData.id},s.range=function(){var t,e,a=c.PaginationRangeSize,o=[];if(s.pageCount()>a){var r=(e=(t=s.pageNumber<=0?0:s.pageNumber-1)+(a-1))-s.pageCount();0<r&&(t-=r,e-=r)}else t=0,e=s.pageCount();for(var i=t;i<=e;i++)o.push(i);return o},s.prevPage=function(){1<s.pageNumber&&(s.pageNumber--,l(),f())},s.DisablePrevPage=function(){return 0===s.pageNumber?"disabled":""},s.pageCount=function(){return Math.ceil(s.totalRecords/s.pageSize)-1},s.nextPage=function(){s.pageNumber<s.pageCount()&&(s.pageNumber++,l(),f())},s.DisableNextPage=function(){return s.pageNumber===s.pageCount()?"disabled":""},s.setPage=function(t){s.pageNumber=t,l(),f()}}]),app.controller("reviewListController",["$scope","authService","$rootScope","$window","$location","DATA_URLS","$http","$routeParams","$anchorScroll",function(e,t,a,o,r,i,n,s,c){"use strict";c(),e.serviceRecordList=[],e.productRecordLis=[],e.isLoading=!1,e.selectedReview={},e.isLoading=!0,n.post(i.REVIEW_LIST_FOR_PRODUCT,e.selectedReview).then(function(t){e.isLoading=!1,t.status&&200!=t.status||(e.productRecordList=t.list,angular.forEach(e.recordList,function(t){t.dateString=timeAgo(Date.parse(t.createdDate))}))}),e.isLoading=!0,n.post(i.REVIEW_LIST_FOR_BUSINESS,e.selectedReview).then(function(t){e.isLoading=!1,t.status&&200!=t.status||(e.serviceRecordList=t.list,angular.forEach(e.recordList,function(t){t.dateString=timeAgo(Date.parse(t.createdDate))}))})}]);